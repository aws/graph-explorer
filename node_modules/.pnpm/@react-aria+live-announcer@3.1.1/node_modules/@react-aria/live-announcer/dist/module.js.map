{"mappings":"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","sources":["packages/@react-aria/live-announcer/src/index.ts","packages/@react-aria/live-announcer/src/LiveAnnouncer.tsx"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\nexport {announce, clearAnnouncer, destroyAnnouncer} from './LiveAnnouncer';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\ntype Assertiveness = 'assertive' | 'polite';\n\n/* Inspired by https://github.com/AlmeroSteyn/react-aria-live */\nconst LIVEREGION_TIMEOUT_DELAY = 7000;\n\nlet liveAnnouncer: LiveAnnouncer = null;\n\n/**\n * Announces the message using screen reader technology.\n */\nexport function announce(\n  message: string,\n  assertiveness: Assertiveness = 'assertive',\n  timeout = LIVEREGION_TIMEOUT_DELAY\n) {\n  if (!liveAnnouncer) {\n    liveAnnouncer = new LiveAnnouncer();\n  }\n\n  liveAnnouncer.announce(message, assertiveness, timeout);\n}\n\n/**\n * Stops all queued announcements.\n */\nexport function clearAnnouncer(assertiveness: Assertiveness) {\n  if (liveAnnouncer) {\n    liveAnnouncer.clear(assertiveness);\n  }\n}\n\n/**\n * Removes the announcer from the DOM.\n */\nexport function destroyAnnouncer() {\n  if (liveAnnouncer) {\n    liveAnnouncer.destroy();\n    liveAnnouncer = null;\n  }\n}\n\n// LiveAnnouncer is implemented using vanilla DOM, not React. That's because as of React 18\n// ReactDOM.render is deprecated, and the replacement, ReactDOM.createRoot is moved into a\n// subpath import `react-dom/client`. That makes it hard for us to support multiple React versions.\n// As a global API, we can't use portals without introducing a breaking API change. LiveAnnouncer\n// is simple enough to implement without React, so that's what we do here.\n// See this discussion for more details: https://github.com/reactwg/react-18/discussions/125#discussioncomment-2382638\nclass LiveAnnouncer {\n  node: HTMLElement;\n  assertiveLog: HTMLElement;\n  politeLog: HTMLElement;\n\n  constructor() {\n    this.node = document.createElement('div');\n    this.node.dataset.liveAnnouncer = 'true';\n    // copied from VisuallyHidden\n    Object.assign(this.node.style, {\n      border: 0,\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      height: 1,\n      margin: '0 -1px -1px 0',\n      overflow: 'hidden',\n      padding: 0,\n      position: 'absolute',\n      width: 1,\n      whiteSpace: 'nowrap'\n    });\n\n    this.assertiveLog = this.createLog('assertive');\n    this.node.appendChild(this.assertiveLog);\n\n    this.politeLog = this.createLog('polite');\n    this.node.appendChild(this.politeLog);\n\n    document.body.prepend(this.node);\n  }\n\n  createLog(ariaLive: string) {\n    let node = document.createElement('div');\n    node.setAttribute('role', 'log');\n    node.setAttribute('aria-live', ariaLive);\n    node.setAttribute('aria-relevant', 'additions');\n    return node;\n  }\n\n  destroy() {\n    if (!this.node) {\n      return;\n    }\n\n    document.body.removeChild(this.node);\n    this.node = null;\n  }\n\n  announce(message: string, assertiveness = 'assertive', timeout = LIVEREGION_TIMEOUT_DELAY) {\n    if (!this.node) {\n      return;\n    }\n\n    let node = document.createElement('div');\n    node.textContent = message;\n\n    if (assertiveness === 'assertive') {\n      this.assertiveLog.appendChild(node);\n    } else {\n      this.politeLog.appendChild(node);\n    }\n\n    if (message !== '') {\n      setTimeout(() => {\n        node.remove();\n      }, timeout);\n    }\n  }\n\n  clear(assertiveness: Assertiveness) {\n    if (!this.node) {\n      return;\n    }\n\n    if (!assertiveness || assertiveness === 'assertive') {\n      this.assertiveLog.innerHTML = '';\n    }\n\n    if (!assertiveness || assertiveness === 'polite') {\n      this.politeLog.innerHTML = '';\n    }\n  }\n}\n"],"names":[],"version":3,"file":"module.js.map"}