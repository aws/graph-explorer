{"version":3,"file":"use-scroll-lock.js","sources":["../../src/use-scroll-lock/use-scroll-lock.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nimport { getLockStyles } from './utils/get-lock-styles';\nimport { injectStyles } from './utils/inject-style-tag';\nimport { insertStyleTag } from './utils/insert-style-tag';\nimport { makeStyleTag } from './utils/make-style-tag';\n\nexport function useScrollLock(\n  lock?: boolean,\n  options = {\n    disableBodyPadding: false,\n  }\n) {\n  const [scrollLocked, setScrollLocked] = useState(lock || false);\n  const scrollTop = useRef(0);\n\n  const { disableBodyPadding } = options;\n\n  const stylesheet = useRef<CSSStyleSheet | any | null>(null);\n\n  const lockScroll = () => {\n    scrollTop.current = window.scrollY;\n\n    const styles = getLockStyles({ disableBodyPadding });\n\n    /**\n     * by applying styles via style tag\n     * we dont care about previous styles due to inheritance\n     * when scroll gets unlocked we delete that style tag\n     */\n    const sheet = makeStyleTag();\n\n    injectStyles(sheet, styles);\n    insertStyleTag(sheet);\n\n    stylesheet.current = sheet;\n  };\n\n  const unlockScroll = () => {\n    if (!stylesheet?.current) return;\n\n    stylesheet.current.parentNode.removeChild(stylesheet.current);\n    stylesheet.current = null;\n  };\n\n  useEffect(() => {\n    if (scrollLocked) {\n      lockScroll();\n    } else {\n      unlockScroll();\n    }\n\n    return unlockScroll;\n  }, [scrollLocked]);\n\n  useEffect(() => {\n    if (lock !== undefined) {\n      setScrollLocked(lock);\n    }\n  }, [lock]);\n\n  useEffect(() => {\n    if (lock === undefined && typeof window !== 'undefined') {\n      window.document.body.style.overflow === 'hidden' && setScrollLocked(true);\n    }\n  }, [setScrollLocked]);\n\n  return [scrollLocked, setScrollLocked] as const;\n}\n"],"names":[],"mappings":";;;;;;AAKO,SAAS,aAAa,CAAC,IAAI,EAAE,OAAO,GAAG;AAC9C,EAAE,kBAAkB,EAAE,KAAK;AAC3B,CAAC,EAAE;AACH,EAAE,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC;AAClE,EAAE,MAAM,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAC9B,EAAE,MAAM,EAAE,kBAAkB,EAAE,GAAG,OAAO,CAAC;AACzC,EAAE,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AAClC,EAAE,MAAM,UAAU,GAAG,MAAM;AAC3B,IAAI,SAAS,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AACvC,IAAI,MAAM,MAAM,GAAG,aAAa,CAAC,EAAE,kBAAkB,EAAE,CAAC,CAAC;AACzD,IAAI,MAAM,KAAK,GAAG,YAAY,EAAE,CAAC;AACjC,IAAI,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;AAChC,IAAI,cAAc,CAAC,KAAK,CAAC,CAAC;AAC1B,IAAI,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;AAC/B,GAAG,CAAC;AACJ,EAAE,MAAM,YAAY,GAAG,MAAM;AAC7B,IAAI,IAAI,EAAE,UAAU,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,UAAU,CAAC,OAAO,CAAC;AAC3D,MAAM,OAAO;AACb,IAAI,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAClE,IAAI,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;AAC9B,GAAG,CAAC;AACJ,EAAE,SAAS,CAAC,MAAM;AAClB,IAAI,IAAI,YAAY,EAAE;AACtB,MAAM,UAAU,EAAE,CAAC;AACnB,KAAK,MAAM;AACX,MAAM,YAAY,EAAE,CAAC;AACrB,KAAK;AACL,IAAI,OAAO,YAAY,CAAC;AACxB,GAAG,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;AACrB,EAAE,SAAS,CAAC,MAAM;AAClB,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;AACzB,MAAM,eAAe,CAAC,IAAI,CAAC,CAAC;AAC5B,KAAK;AACL,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;AACb,EAAE,SAAS,CAAC,MAAM;AAClB,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AAC1D,MAAM,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK,QAAQ,IAAI,eAAe,CAAC,IAAI,CAAC,CAAC;AAChF,KAAK;AACL,GAAG,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;AACxB,EAAE,OAAO,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;AACzC;;;;"}