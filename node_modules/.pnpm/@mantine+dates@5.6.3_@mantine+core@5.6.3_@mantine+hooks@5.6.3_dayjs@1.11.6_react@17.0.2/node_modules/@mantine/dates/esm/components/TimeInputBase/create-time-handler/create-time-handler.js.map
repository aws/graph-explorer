{"version":3,"file":"create-time-handler.js","sources":["../../../../src/components/TimeInputBase/create-time-handler/create-time-handler.ts"],"sourcesContent":["import { clamp } from '@mantine/hooks';\nimport { padTime } from '../pad-time/pad-time';\nimport { allButLastDigit } from './all-but-last-digit/all-but-last-digit';\n\ninterface CreateTimeHandler {\n  onChange(value: string, carryOver?: string): void;\n  nextRef?: React.RefObject<HTMLInputElement>;\n  min: number;\n  max: number;\n  nextMax?: number;\n}\n\nexport function createTimeHandler({ onChange, nextRef, min, max, nextMax }: CreateTimeHandler) {\n  return (value: string, triggerShift: boolean, forceTriggerShift = false) => {\n    const parsed = parseInt(value, 10);\n\n    if (Number.isNaN(parsed)) {\n      return;\n    }\n\n    if (parsed > allButLastDigit(max) || forceTriggerShift) {\n      const lastDigit = parsed % 10;\n\n      let updatedValue: string;\n      let carryOver: string | undefined;\n\n      /*\n        Check if it is possible to construct a number that satisfies the following conditions:\n          1. The number starts with the last digit of the current value.\n          2. The number is less than the next field's maximum value constraint.\n      */\n      if (parsed > max && nextMax && lastDigit <= allButLastDigit(nextMax)) {\n        updatedValue = padTime(allButLastDigit(parsed).toString());\n        carryOver = padTime(lastDigit.toString());\n      } else {\n        updatedValue = padTime(clamp(parsed, min, max).toString());\n      }\n\n      onChange(updatedValue, carryOver);\n      triggerShift && nextRef?.current?.focus();\n      triggerShift && nextRef?.current?.select();\n      return;\n    }\n\n    onChange(parsed.toString());\n  };\n}\n"],"names":[],"mappings":";;;;AAGO,SAAS,iBAAiB,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE;AAC5E,EAAE,OAAO,CAAC,KAAK,EAAE,YAAY,EAAE,iBAAiB,GAAG,KAAK,KAAK;AAC7D,IAAI,IAAI,EAAE,EAAE,EAAE,CAAC;AACf,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AACvC,IAAI,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;AAC9B,MAAM,OAAO;AACb,KAAK;AACL,IAAI,IAAI,MAAM,GAAG,eAAe,CAAC,GAAG,CAAC,IAAI,iBAAiB,EAAE;AAC5D,MAAM,MAAM,SAAS,GAAG,MAAM,GAAG,EAAE,CAAC;AACpC,MAAM,IAAI,YAAY,CAAC;AACvB,MAAM,IAAI,SAAS,CAAC;AACpB,MAAM,IAAI,MAAM,GAAG,GAAG,IAAI,OAAO,IAAI,SAAS,IAAI,eAAe,CAAC,OAAO,CAAC,EAAE;AAC5E,QAAQ,YAAY,GAAG,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;AACnE,QAAQ,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;AAClD,OAAO,MAAM;AACb,QAAQ,YAAY,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;AACnE,OAAO;AACP,MAAM,QAAQ,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;AACxC,MAAM,YAAY,KAAK,CAAC,EAAE,GAAG,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC,OAAO,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;AACxG,MAAM,YAAY,KAAK,CAAC,EAAE,GAAG,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC,OAAO,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC;AACzG,MAAM,OAAO;AACb,KAAK;AACL,IAAI,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;AAChC,GAAG,CAAC;AACJ;;;;"}