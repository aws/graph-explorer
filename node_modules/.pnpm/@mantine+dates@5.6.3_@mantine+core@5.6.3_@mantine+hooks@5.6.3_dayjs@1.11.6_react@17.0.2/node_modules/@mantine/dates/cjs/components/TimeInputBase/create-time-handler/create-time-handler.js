'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var hooks = require('@mantine/hooks');
var padTime = require('../pad-time/pad-time.js');
var allButLastDigit = require('./all-but-last-digit/all-but-last-digit.js');

function createTimeHandler({ onChange, nextRef, min, max, nextMax }) {
  return (value, triggerShift, forceTriggerShift = false) => {
    var _a, _b;
    const parsed = parseInt(value, 10);
    if (Number.isNaN(parsed)) {
      return;
    }
    if (parsed > allButLastDigit.allButLastDigit(max) || forceTriggerShift) {
      const lastDigit = parsed % 10;
      let updatedValue;
      let carryOver;
      if (parsed > max && nextMax && lastDigit <= allButLastDigit.allButLastDigit(nextMax)) {
        updatedValue = padTime.padTime(allButLastDigit.allButLastDigit(parsed).toString());
        carryOver = padTime.padTime(lastDigit.toString());
      } else {
        updatedValue = padTime.padTime(hooks.clamp(parsed, min, max).toString());
      }
      onChange(updatedValue, carryOver);
      triggerShift && ((_a = nextRef == null ? void 0 : nextRef.current) == null ? void 0 : _a.focus());
      triggerShift && ((_b = nextRef == null ? void 0 : nextRef.current) == null ? void 0 : _b.select());
      return;
    }
    onChange(parsed.toString());
  };
}

exports.createTimeHandler = createTimeHandler;
//# sourceMappingURL=create-time-handler.js.map
