import {
  require_react_dom
} from "./chunk-4OZ5FRL3.js";
import {
  require_react
} from "./chunk-57SFASAQ.js";
import {
  __toESM
} from "./chunk-S5KM4IGW.js";

// ../../node_modules/.pnpm/@virtuoso.dev+react-urx@0.2.13_react@17.0.2/node_modules/@virtuoso.dev/react-urx/dist/react-urx.esm.js
var import_react = __toESM(require_react());

// ../../node_modules/.pnpm/@virtuoso.dev+urx@0.2.13/node_modules/@virtuoso.dev/urx/dist/urx.esm.js
var PUBLISH = 0;
var SUBSCRIBE = 1;
var RESET = 2;
var VALUE = 4;
function compose(a2, b2) {
  return function(arg) {
    return a2(b2(arg));
  };
}
function thrush(arg, proc) {
  return proc(arg);
}
function curry2to1(proc, arg1) {
  return function(arg2) {
    return proc(arg1, arg2);
  };
}
function curry1to0(proc, arg) {
  return function() {
    return proc(arg);
  };
}
function tap(arg, proc) {
  proc(arg);
  return arg;
}
function tup() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  return args;
}
function call(proc) {
  proc();
}
function always(value) {
  return function() {
    return value;
  };
}
function joinProc() {
  for (var _len2 = arguments.length, procs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    procs[_key2] = arguments[_key2];
  }
  return function() {
    procs.map(call);
  };
}
function noop() {
}
function subscribe(emitter, subscription) {
  return emitter(SUBSCRIBE, subscription);
}
function publish(publisher, value) {
  publisher(PUBLISH, value);
}
function reset(emitter) {
  emitter(RESET);
}
function getValue(depot) {
  return depot(VALUE);
}
function connect(emitter, publisher) {
  return subscribe(emitter, curry2to1(publisher, PUBLISH));
}
function handleNext(emitter, subscription) {
  var unsub = emitter(SUBSCRIBE, function(value) {
    unsub();
    subscription(value);
  });
  return unsub;
}
function stream() {
  var subscriptions = [];
  return function(action, arg) {
    switch (action) {
      case RESET:
        subscriptions.splice(0, subscriptions.length);
        return;
      case SUBSCRIBE:
        subscriptions.push(arg);
        return function() {
          var indexOf = subscriptions.indexOf(arg);
          if (indexOf > -1) {
            subscriptions.splice(indexOf, 1);
          }
        };
      case PUBLISH:
        subscriptions.slice().forEach(function(subscription) {
          subscription(arg);
        });
        return;
      default:
        throw new Error("unrecognized action " + action);
    }
  };
}
function statefulStream(initial) {
  var value = initial;
  var innerSubject = stream();
  return function(action, arg) {
    switch (action) {
      case SUBSCRIBE:
        var subscription = arg;
        subscription(value);
        break;
      case PUBLISH:
        value = arg;
        break;
      case VALUE:
        return value;
    }
    return innerSubject(action, arg);
  };
}
function eventHandler(emitter) {
  var unsub;
  var currentSubscription;
  var cleanup = function cleanup2() {
    return unsub && unsub();
  };
  return function(action, subscription) {
    switch (action) {
      case SUBSCRIBE:
        if (subscription) {
          if (currentSubscription === subscription) {
            return;
          }
          cleanup();
          currentSubscription = subscription;
          unsub = subscribe(emitter, subscription);
          return unsub;
        } else {
          cleanup();
          return noop;
        }
      case RESET:
        cleanup();
        currentSubscription = null;
        return;
      default:
        throw new Error("unrecognized action " + action);
    }
  };
}
function streamFromEmitter(emitter) {
  return tap(stream(), function(stream2) {
    return connect(emitter, stream2);
  });
}
function statefulStreamFromEmitter(emitter, initial) {
  return tap(statefulStream(initial), function(stream2) {
    return connect(emitter, stream2);
  });
}
function combineOperators() {
  for (var _len = arguments.length, operators = new Array(_len), _key = 0; _key < _len; _key++) {
    operators[_key] = arguments[_key];
  }
  return function(subscriber) {
    return operators.reduceRight(thrush, subscriber);
  };
}
function pipe(source) {
  for (var _len2 = arguments.length, operators = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    operators[_key2 - 1] = arguments[_key2];
  }
  var project = combineOperators.apply(void 0, operators);
  return function(action, subscription) {
    switch (action) {
      case SUBSCRIBE:
        return subscribe(source, project(subscription));
      case RESET:
        reset(source);
        return;
      default:
        throw new Error("unrecognized action " + action);
    }
  };
}
function defaultComparator(previous, next) {
  return previous === next;
}
function distinctUntilChanged(comparator) {
  if (comparator === void 0) {
    comparator = defaultComparator;
  }
  var current;
  return function(done) {
    return function(next) {
      if (!comparator(current, next)) {
        current = next;
        done(next);
      }
    };
  };
}
function filter(predicate) {
  return function(done) {
    return function(value) {
      predicate(value) && done(value);
    };
  };
}
function map(project) {
  return function(done) {
    return compose(done, project);
  };
}
function mapTo(value) {
  return function(done) {
    return function() {
      return done(value);
    };
  };
}
function scan(scanner, initial) {
  return function(done) {
    return function(value) {
      return done(initial = scanner(initial, value));
    };
  };
}
function skip(times) {
  return function(done) {
    return function(value) {
      times > 0 ? times-- : done(value);
    };
  };
}
function throttleTime(interval) {
  var currentValue;
  var timeout;
  return function(done) {
    return function(value) {
      currentValue = value;
      if (timeout) {
        return;
      }
      timeout = setTimeout(function() {
        timeout = void 0;
        done(currentValue);
      }, interval);
    };
  };
}
function debounceTime(interval) {
  var currentValue;
  var timeout;
  return function(done) {
    return function(value) {
      currentValue = value;
      if (timeout) {
        clearTimeout(timeout);
      }
      timeout = setTimeout(function() {
        done(currentValue);
      }, interval);
    };
  };
}
function withLatestFrom() {
  for (var _len3 = arguments.length, sources = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    sources[_key3] = arguments[_key3];
  }
  var values = new Array(sources.length);
  var called = 0;
  var pendingCall = null;
  var allCalled = Math.pow(2, sources.length) - 1;
  sources.forEach(function(source, index) {
    var bit = Math.pow(2, index);
    subscribe(source, function(value) {
      var prevCalled = called;
      called = called | bit;
      values[index] = value;
      if (prevCalled !== allCalled && called === allCalled && pendingCall) {
        pendingCall();
        pendingCall = null;
      }
    });
  });
  return function(done) {
    return function(value) {
      var call2 = function call3() {
        return done([value].concat(values));
      };
      if (called === allCalled) {
        call2();
      } else {
        pendingCall = call2;
      }
    };
  };
}
function merge() {
  for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {
    sources[_key] = arguments[_key];
  }
  return function(action, subscription) {
    switch (action) {
      case SUBSCRIBE:
        return joinProc.apply(void 0, sources.map(function(source) {
          return subscribe(source, subscription);
        }));
      case RESET:
        return;
      default:
        throw new Error("unrecognized action " + action);
    }
  };
}
function duc(source, comparator) {
  if (comparator === void 0) {
    comparator = defaultComparator;
  }
  return pipe(source, distinctUntilChanged(comparator));
}
function combineLatest() {
  var innerSubject = stream();
  for (var _len2 = arguments.length, emitters = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    emitters[_key2] = arguments[_key2];
  }
  var values = new Array(emitters.length);
  var called = 0;
  var allCalled = Math.pow(2, emitters.length) - 1;
  emitters.forEach(function(source, index) {
    var bit = Math.pow(2, index);
    subscribe(source, function(value) {
      values[index] = value;
      called = called | bit;
      if (called === allCalled) {
        publish(innerSubject, values);
      }
    });
  });
  return function(action, subscription) {
    switch (action) {
      case SUBSCRIBE:
        if (called === allCalled) {
          subscription(values);
        }
        return subscribe(innerSubject, subscription);
      case RESET:
        return reset(innerSubject);
      default:
        throw new Error("unrecognized action " + action);
    }
  };
}
function system(constructor, dependencies, _temp) {
  if (dependencies === void 0) {
    dependencies = [];
  }
  var _ref = _temp === void 0 ? {
    singleton: true
  } : _temp, singleton = _ref.singleton;
  return {
    id: id(),
    constructor,
    dependencies,
    singleton
  };
}
var id = function id2() {
  return Symbol();
};
function init(systemSpec) {
  var singletons = /* @__PURE__ */ new Map();
  var _init = function _init2(_ref2) {
    var id3 = _ref2.id, constructor = _ref2.constructor, dependencies = _ref2.dependencies, singleton = _ref2.singleton;
    if (singleton && singletons.has(id3)) {
      return singletons.get(id3);
    }
    var system2 = constructor(dependencies.map(function(e) {
      return _init2(e);
    }));
    if (singleton) {
      singletons.set(id3, system2);
    }
    return system2;
  };
  return _init(systemSpec);
}

// ../../node_modules/.pnpm/@virtuoso.dev+react-urx@0.2.13_react@17.0.2/node_modules/@virtuoso.dev/react-urx/dist/react-urx.esm.js
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null)
    return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i2;
  for (i2 = 0; i2 < sourceKeys.length; i2++) {
    key = sourceKeys[i2];
    if (excluded.indexOf(key) >= 0)
      continue;
    target[key] = source[key];
  }
  return target;
}
function _unsupportedIterableToArray(o2, minLen) {
  if (!o2)
    return;
  if (typeof o2 === "string")
    return _arrayLikeToArray(o2, minLen);
  var n2 = Object.prototype.toString.call(o2).slice(8, -1);
  if (n2 === "Object" && o2.constructor)
    n2 = o2.constructor.name;
  if (n2 === "Map" || n2 === "Set")
    return Array.from(o2);
  if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
    return _arrayLikeToArray(o2, minLen);
}
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length)
    len = arr.length;
  for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++)
    arr2[i2] = arr[i2];
  return arr2;
}
function _createForOfIteratorHelperLoose(o2, allowArrayLike) {
  var it2 = typeof Symbol !== "undefined" && o2[Symbol.iterator] || o2["@@iterator"];
  if (it2)
    return (it2 = it2.call(o2)).next.bind(it2);
  if (Array.isArray(o2) || (it2 = _unsupportedIterableToArray(o2)) || allowArrayLike && o2 && typeof o2.length === "number") {
    if (it2)
      o2 = it2;
    var i2 = 0;
    return function() {
      if (i2 >= o2.length)
        return {
          done: true
        };
      return {
        done: false,
        value: o2[i2++]
      };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
var _excluded = ["children"];
function omit(keys, obj) {
  var result = {};
  var index = {};
  var idx = 0;
  var len = keys.length;
  while (idx < len) {
    index[keys[idx]] = 1;
    idx += 1;
  }
  for (var prop in obj) {
    if (!index.hasOwnProperty(prop)) {
      result[prop] = obj[prop];
    }
  }
  return result;
}
var useIsomorphicLayoutEffect = typeof document !== "undefined" ? import_react.useLayoutEffect : import_react.useEffect;
function systemToComponent(systemSpec, map2, Root) {
  var requiredPropNames = Object.keys(map2.required || {});
  var optionalPropNames = Object.keys(map2.optional || {});
  var methodNames = Object.keys(map2.methods || {});
  var eventNames = Object.keys(map2.events || {});
  var Context = (0, import_react.createContext)({});
  function applyPropsToSystem(system2, props) {
    if (system2["propsReady"]) {
      publish(system2["propsReady"], false);
    }
    for (var _iterator = _createForOfIteratorHelperLoose(requiredPropNames), _step; !(_step = _iterator()).done; ) {
      var requiredPropName = _step.value;
      var stream2 = system2[map2.required[requiredPropName]];
      publish(stream2, props[requiredPropName]);
    }
    for (var _iterator2 = _createForOfIteratorHelperLoose(optionalPropNames), _step2; !(_step2 = _iterator2()).done; ) {
      var optionalPropName = _step2.value;
      if (optionalPropName in props) {
        var _stream = system2[map2.optional[optionalPropName]];
        publish(_stream, props[optionalPropName]);
      }
    }
    if (system2["propsReady"]) {
      publish(system2["propsReady"], true);
    }
  }
  function buildMethods(system2) {
    return methodNames.reduce(function(acc, methodName) {
      acc[methodName] = function(value) {
        var stream2 = system2[map2.methods[methodName]];
        publish(stream2, value);
      };
      return acc;
    }, {});
  }
  function buildEventHandlers(system2) {
    return eventNames.reduce(function(handlers, eventName) {
      handlers[eventName] = eventHandler(system2[map2.events[eventName]]);
      return handlers;
    }, {});
  }
  var Component = (0, import_react.forwardRef)(function(propsWithChildren, ref) {
    var children = propsWithChildren.children, props = _objectWithoutPropertiesLoose(propsWithChildren, _excluded);
    var _useState = (0, import_react.useState)(function() {
      return tap(init(systemSpec), function(system3) {
        return applyPropsToSystem(system3, props);
      });
    }), system2 = _useState[0];
    var _useState2 = (0, import_react.useState)(curry1to0(buildEventHandlers, system2)), handlers = _useState2[0];
    useIsomorphicLayoutEffect(function() {
      for (var _iterator3 = _createForOfIteratorHelperLoose(eventNames), _step3; !(_step3 = _iterator3()).done; ) {
        var eventName = _step3.value;
        if (eventName in props) {
          subscribe(handlers[eventName], props[eventName]);
        }
      }
      return function() {
        Object.values(handlers).map(reset);
      };
    }, [props, handlers, system2]);
    useIsomorphicLayoutEffect(function() {
      applyPropsToSystem(system2, props);
    });
    (0, import_react.useImperativeHandle)(ref, always(buildMethods(system2)));
    return (0, import_react.createElement)(Context.Provider, {
      value: system2
    }, Root ? (0, import_react.createElement)(Root, omit([].concat(requiredPropNames, optionalPropNames, eventNames), props), children) : children);
  });
  var usePublisher = function usePublisher2(key) {
    return (0, import_react.useCallback)(curry2to1(publish, (0, import_react.useContext)(Context)[key]), [key]);
  };
  var useEmitterValue = function useEmitterValue2(key) {
    var context = (0, import_react.useContext)(Context);
    var source = context[key];
    var _useState3 = (0, import_react.useState)(curry1to0(getValue, source)), value = _useState3[0], setValue = _useState3[1];
    useIsomorphicLayoutEffect(function() {
      return subscribe(source, function(next) {
        if (next !== value) {
          setValue(always(next));
        }
      });
    }, [source, value]);
    return value;
  };
  var useEmitter = function useEmitter2(key, callback) {
    var context = (0, import_react.useContext)(Context);
    var source = context[key];
    useIsomorphicLayoutEffect(function() {
      return subscribe(source, callback);
    }, [callback, source]);
  };
  return {
    Component,
    usePublisher,
    useEmitterValue,
    useEmitter
  };
}

// ../../node_modules/.pnpm/react-virtuoso@2.19.1_react-dom@17.0.2_react@17.0.2/node_modules/react-virtuoso/dist/index.m.js
var n = __toESM(require_react());
var import_react2 = __toESM(require_react());
var import_react_dom = __toESM(require_react_dom());
function c() {
  return c = Object.assign || function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var n2 = arguments[e];
      for (var o2 in n2)
        Object.prototype.hasOwnProperty.call(n2, o2) && (t[o2] = n2[o2]);
    }
    return t;
  }, c.apply(this, arguments);
}
function m(t, e) {
  if (null == t)
    return {};
  var n2, o2, r2 = {}, i2 = Object.keys(t);
  for (o2 = 0; o2 < i2.length; o2++)
    e.indexOf(n2 = i2[o2]) >= 0 || (r2[n2] = t[n2]);
  return r2;
}
function d(t, e) {
  (null == e || e > t.length) && (e = t.length);
  for (var n2 = 0, o2 = new Array(e); n2 < e; n2++)
    o2[n2] = t[n2];
  return o2;
}
function f(t, e) {
  var n2 = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
  if (n2)
    return (n2 = n2.call(t)).next.bind(n2);
  if (Array.isArray(t) || (n2 = function(t2, e2) {
    if (t2) {
      if ("string" == typeof t2)
        return d(t2, e2);
      var n3 = Object.prototype.toString.call(t2).slice(8, -1);
      return "Object" === n3 && t2.constructor && (n3 = t2.constructor.name), "Map" === n3 || "Set" === n3 ? Array.from(t2) : "Arguments" === n3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? d(t2, e2) : void 0;
    }
  }(t)) || e && t && "number" == typeof t.length) {
    n2 && (t = n2);
    var o2 = 0;
    return function() {
      return o2 >= t.length ? { done: true } : { done: false, value: t[o2++] };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
var p;
var h;
var g = "undefined" != typeof document ? import_react2.useLayoutEffect : import_react2.useEffect;
!function(t) {
  t[t.DEBUG = 0] = "DEBUG", t[t.INFO = 1] = "INFO", t[t.WARN = 2] = "WARN", t[t.ERROR = 3] = "ERROR";
}(h || (h = {}));
var v = ((p = {})[h.DEBUG] = "debug", p[h.INFO] = "log", p[h.WARN] = "warn", p[h.ERROR] = "error", p);
var S = system(function() {
  var t = statefulStream(h.ERROR);
  return { log: statefulStream(function(n2, o2, r2) {
    var i2;
    void 0 === r2 && (r2 = h.INFO), r2 >= (null != (i2 = ("undefined" == typeof globalThis ? window : globalThis).VIRTUOSO_LOG_LEVEL) ? i2 : getValue(t)) && console[v[r2]]("%creact-virtuoso: %c%s %o", "color: #0253b3; font-weight: bold", "color: initial", n2, o2);
  }), logLevel: t };
}, [], { singleton: true });
function I(t, e) {
  void 0 === e && (e = true);
  var n2 = (0, import_react2.useRef)(null), o2 = function(t2) {
  };
  if ("undefined" != typeof ResizeObserver) {
    var r2 = new ResizeObserver(function(e2) {
      var n3 = e2[0].target;
      null !== n3.offsetParent && t(n3);
    });
    o2 = function(t2) {
      t2 && e ? (r2.observe(t2), n2.current = t2) : (n2.current && r2.unobserve(n2.current), n2.current = null);
    };
  }
  return { ref: n2, callbackRef: o2 };
}
function C(t, e) {
  return void 0 === e && (e = true), I(t, e).callbackRef;
}
function T(t, e, n2, o2, r2, i2, a2) {
  return I(function(n3) {
    for (var l2 = function(t2, e2, n4, o3) {
      var r3 = t2.length;
      if (0 === r3)
        return null;
      for (var i3 = [], a3 = 0; a3 < r3; a3++) {
        var l3 = t2.item(a3);
        if (l3 && void 0 !== l3.dataset.index) {
          var s3 = parseInt(l3.dataset.index), u3 = parseFloat(l3.dataset.knownSize), c3 = e2(l3, "offsetHeight");
          if (0 === c3 && o3("Zero-sized element, this should not happen", { child: l3 }, h.ERROR), c3 !== u3) {
            var m3 = i3[i3.length - 1];
            0 === i3.length || m3.size !== c3 || m3.endIndex !== s3 - 1 ? i3.push({ startIndex: s3, endIndex: s3, size: c3 }) : i3[i3.length - 1].endIndex++;
          }
        }
      }
      return i3;
    }(n3.children, e, 0, r2), s2 = n3.parentElement; !s2.dataset.virtuosoScroller; )
      s2 = s2.parentElement;
    var u2 = "window" === s2.firstElementChild.dataset.viewportType, c2 = a2 ? a2.scrollTop : u2 ? window.pageYOffset || document.documentElement.scrollTop : s2.scrollTop, m2 = a2 ? a2.scrollHeight : u2 ? document.documentElement.scrollHeight : s2.scrollHeight, d2 = a2 ? a2.offsetHeight : u2 ? window.innerHeight : s2.offsetHeight;
    o2({ scrollTop: Math.max(c2, 0), scrollHeight: m2, viewportHeight: d2 }), null == i2 || i2(function(t2, e2, n4) {
      return "normal" === e2 || null != e2 && e2.endsWith("px") || n4("row-gap was not resolved to pixel value correctly", e2, h.WARN), "normal" === e2 ? 0 : parseInt(null != e2 ? e2 : "0", 10);
    }(0, getComputedStyle(n3).rowGap, r2)), null !== l2 && t(l2);
  }, n2);
}
function w(t, e) {
  return Math.round(t.getBoundingClientRect()[e]);
}
function x(t, e) {
  return Math.abs(t - e) < 1.01;
}
function b(t, n2, o2, l2, s2) {
  void 0 === l2 && (l2 = noop);
  var c2 = (0, import_react2.useRef)(null), m2 = (0, import_react2.useRef)(null), d2 = (0, import_react2.useRef)(null), f2 = (0, import_react2.useRef)(false), p2 = (0, import_react2.useCallback)(function(e) {
    var o3 = e.target, r2 = o3 === window || o3 === document, i2 = r2 ? window.pageYOffset || document.documentElement.scrollTop : o3.scrollTop, a2 = r2 ? document.documentElement.scrollHeight : o3.scrollHeight, l3 = r2 ? window.innerHeight : o3.offsetHeight, s3 = function() {
      t({ scrollTop: Math.max(i2, 0), scrollHeight: a2, viewportHeight: l3 });
    };
    f2.current ? (0, import_react_dom.flushSync)(s3) : s3(), f2.current = false, null !== m2.current && (i2 === m2.current || i2 <= 0 || i2 === a2 - l3) && (m2.current = null, n2(true), d2.current && (clearTimeout(d2.current), d2.current = null));
  }, [t, n2]);
  return (0, import_react2.useEffect)(function() {
    var t2 = s2 || c2.current;
    return l2(s2 || c2.current), p2({ target: t2 }), t2.addEventListener("scroll", p2, { passive: true }), function() {
      l2(null), t2.removeEventListener("scroll", p2);
    };
  }, [c2, p2, o2, l2, s2]), { scrollerRef: c2, scrollByCallback: function(t2) {
    f2.current = true, c2.current.scrollBy(t2);
  }, scrollToCallback: function(e) {
    var o3 = c2.current;
    if (o3 && (!("offsetHeight" in o3) || 0 !== o3.offsetHeight)) {
      var r2, i2, a2, l3 = "smooth" === e.behavior;
      if (o3 === window ? (i2 = Math.max(w(document.documentElement, "height"), document.documentElement.scrollHeight), r2 = window.innerHeight, a2 = document.documentElement.scrollTop) : (i2 = o3.scrollHeight, r2 = w(o3, "height"), a2 = o3.scrollTop), e.top = Math.ceil(Math.max(Math.min(i2 - r2, e.top), 0)), x(r2, i2) || e.top === a2)
        return t({ scrollTop: a2, scrollHeight: i2, viewportHeight: r2 }), void (l3 && n2(true));
      l3 ? (m2.current = e.top, d2.current && clearTimeout(d2.current), d2.current = setTimeout(function() {
        d2.current = null, m2.current = null, n2(true);
      }, 1e3)) : m2.current = null, o3.scrollTo(e);
    }
  } };
}
var y = system(function() {
  var t = stream(), n2 = stream(), o2 = statefulStream(0), r2 = stream(), i2 = statefulStream(0), a2 = stream(), l2 = stream(), s2 = statefulStream(0), u2 = statefulStream(0), c2 = statefulStream(0), m2 = statefulStream(0), d2 = stream(), f2 = stream(), p2 = statefulStream(false), h2 = statefulStream(false);
  return connect(pipe(t, map(function(t2) {
    return t2.scrollTop;
  })), n2), connect(pipe(t, map(function(t2) {
    return t2.scrollHeight;
  })), l2), connect(n2, i2), { scrollContainerState: t, scrollTop: n2, viewportHeight: a2, headerHeight: s2, fixedHeaderHeight: u2, fixedFooterHeight: c2, footerHeight: m2, scrollHeight: l2, smoothScrollTargetReached: r2, react18ConcurrentRendering: h2, scrollTo: d2, scrollBy: f2, statefulScrollTop: i2, deviation: o2, scrollingInProgress: p2 };
}, [], { singleton: true });
var H = { lvl: 0 };
function E(t, e, n2, o2, r2) {
  return void 0 === o2 && (o2 = H), void 0 === r2 && (r2 = H), { k: t, v: e, lvl: n2, l: o2, r: r2 };
}
function R(t) {
  return t === H;
}
function L() {
  return H;
}
function k(t, e) {
  if (R(t))
    return H;
  var n2 = t.k, o2 = t.l, r2 = t.r;
  if (e === n2) {
    if (R(o2))
      return r2;
    if (R(r2))
      return o2;
    var i2 = O(o2);
    return A(V(t, { k: i2[0], v: i2[1], l: M(o2) }));
  }
  return A(V(t, e < n2 ? { l: k(o2, e) } : { r: k(r2, e) }));
}
function F(t, e, n2) {
  if (void 0 === n2 && (n2 = "k"), R(t))
    return [-Infinity, void 0];
  if (t[n2] === e)
    return [t.k, t.v];
  if (t[n2] < e) {
    var o2 = F(t.r, e, n2);
    return -Infinity === o2[0] ? [t.k, t.v] : o2;
  }
  return F(t.l, e, n2);
}
function z(t, e, n2) {
  return R(t) ? E(e, n2, 1) : e === t.k ? V(t, { k: e, v: n2 }) : function(t2) {
    return D(G(t2));
  }(V(t, e < t.k ? { l: z(t.l, e, n2) } : { r: z(t.r, e, n2) }));
}
function B(t, e, n2) {
  if (R(t))
    return [];
  var o2 = t.k, r2 = t.v, i2 = t.r, a2 = [];
  return o2 > e && (a2 = a2.concat(B(t.l, e, n2))), o2 >= e && o2 <= n2 && a2.push({ k: o2, v: r2 }), o2 <= n2 && (a2 = a2.concat(B(i2, e, n2))), a2;
}
function P(t) {
  return R(t) ? [] : [].concat(P(t.l), [{ k: t.k, v: t.v }], P(t.r));
}
function O(t) {
  return R(t.r) ? [t.k, t.v] : O(t.r);
}
function M(t) {
  return R(t.r) ? t.l : A(V(t, { r: M(t.r) }));
}
function V(t, e) {
  return E(void 0 !== e.k ? e.k : t.k, void 0 !== e.v ? e.v : t.v, void 0 !== e.lvl ? e.lvl : t.lvl, void 0 !== e.l ? e.l : t.l, void 0 !== e.r ? e.r : t.r);
}
function U(t) {
  return R(t) || t.lvl > t.r.lvl;
}
function A(t) {
  var e = t.l, n2 = t.r, o2 = t.lvl;
  if (n2.lvl >= o2 - 1 && e.lvl >= o2 - 1)
    return t;
  if (o2 > n2.lvl + 1) {
    if (U(e))
      return G(V(t, { lvl: o2 - 1 }));
    if (R(e) || R(e.r))
      throw new Error("Unexpected empty nodes");
    return V(e.r, { l: V(e, { r: e.r.l }), r: V(t, { l: e.r.r, lvl: o2 - 1 }), lvl: o2 });
  }
  if (U(t))
    return D(V(t, { lvl: o2 - 1 }));
  if (R(n2) || R(n2.l))
    throw new Error("Unexpected empty nodes");
  var r2 = n2.l, i2 = U(r2) ? n2.lvl - 1 : n2.lvl;
  return V(r2, { l: V(t, { r: r2.l, lvl: o2 - 1 }), r: D(V(n2, { l: r2.r, lvl: i2 })), lvl: r2.lvl + 1 });
}
function W(t, e, n2) {
  return R(t) ? [] : N(B(t, F(t, e)[0], n2), function(t2) {
    return { index: t2.k, value: t2.v };
  });
}
function N(t, e) {
  var n2 = t.length;
  if (0 === n2)
    return [];
  for (var o2 = e(t[0]), r2 = o2.index, i2 = o2.value, a2 = [], l2 = 1; l2 < n2; l2++) {
    var s2 = e(t[l2]), u2 = s2.index, c2 = s2.value;
    a2.push({ start: r2, end: u2 - 1, value: i2 }), r2 = u2, i2 = c2;
  }
  return a2.push({ start: r2, end: Infinity, value: i2 }), a2;
}
function D(t) {
  var e = t.r, n2 = t.lvl;
  return R(e) || R(e.r) || e.lvl !== n2 || e.r.lvl !== n2 ? t : V(e, { l: V(t, { r: e.l }), lvl: n2 + 1 });
}
function G(t) {
  var e = t.l;
  return R(e) || e.lvl !== t.lvl ? t : V(e, { r: V(t, { l: e.r }) });
}
function _(t, e, n2, o2) {
  void 0 === o2 && (o2 = 0);
  for (var r2 = t.length - 1; o2 <= r2; ) {
    var i2 = Math.floor((o2 + r2) / 2), a2 = n2(t[i2], e);
    if (0 === a2)
      return i2;
    if (-1 === a2) {
      if (r2 - o2 < 2)
        return i2 - 1;
      r2 = i2 - 1;
    } else {
      if (r2 === o2)
        return i2;
      o2 = i2 + 1;
    }
  }
  throw new Error("Failed binary finding record in array - " + t.join(",") + ", searched for " + e);
}
function j(t, e, n2) {
  return t[_(t, e, n2)];
}
var K = system(function() {
  return { recalcInProgress: statefulStream(false) };
}, [], { singleton: true });
function Y(t) {
  var e = t.size, n2 = t.startIndex, o2 = t.endIndex;
  return function(t2) {
    return t2.start === n2 && (t2.end === o2 || Infinity === t2.end) && t2.value === e;
  };
}
function q(t, e) {
  var n2 = t.index;
  return e === n2 ? 0 : e < n2 ? -1 : 1;
}
function Z(t, e) {
  var n2 = t.offset;
  return e === n2 ? 0 : e < n2 ? -1 : 1;
}
function J(t) {
  return { index: t.index, value: t };
}
function $(t, e, n2, o2) {
  var r2 = t, i2 = 0, a2 = 0, l2 = 0, s2 = 0;
  if (0 !== e) {
    l2 = r2[s2 = _(r2, e - 1, q)].offset;
    var u2 = F(n2, e - 1);
    i2 = u2[0], a2 = u2[1], r2.length && r2[s2].size === F(n2, e)[1] && (s2 -= 1), r2 = r2.slice(0, s2 + 1);
  } else
    r2 = [];
  for (var c2, m2 = f(W(n2, e, Infinity)); !(c2 = m2()).done; ) {
    var d2 = c2.value, p2 = d2.start, h2 = d2.value, g2 = p2 - i2, v2 = g2 * a2 + l2 + g2 * o2;
    r2.push({ offset: v2, size: h2, index: p2 }), i2 = p2, l2 = v2, a2 = h2;
  }
  return { offsetTree: r2, lastIndex: i2, lastOffset: l2, lastSize: a2 };
}
function Q(t, e) {
  var n2 = e[0], o2 = e[1], r2 = e[3];
  n2.length > 0 && (0, e[2])("received item sizes", n2, h.DEBUG);
  var i2 = t.sizeTree, a2 = i2, l2 = 0;
  if (o2.length > 0 && R(i2) && 2 === n2.length) {
    var s2 = n2[0].size, u2 = n2[1].size;
    a2 = o2.reduce(function(t2, e2) {
      return z(z(t2, e2, s2), e2 + 1, u2);
    }, a2);
  } else {
    var c2 = function(t2, e2) {
      for (var n3, o3 = R(t2) ? 0 : Infinity, r3 = f(e2); !(n3 = r3()).done; ) {
        var i3 = n3.value, a3 = i3.size, l3 = i3.startIndex, s3 = i3.endIndex;
        if (o3 = Math.min(o3, l3), R(t2))
          t2 = z(t2, 0, a3);
        else {
          var u3 = W(t2, l3 - 1, s3 + 1);
          if (!u3.some(Y(i3))) {
            for (var c3, m3 = false, d3 = false, p2 = f(u3); !(c3 = p2()).done; ) {
              var h2 = c3.value, g2 = h2.start, v2 = h2.end, S2 = h2.value;
              m3 ? (s3 >= g2 || a3 === S2) && (t2 = k(t2, g2)) : (d3 = S2 !== a3, m3 = true), v2 > s3 && s3 >= g2 && S2 !== a3 && (t2 = z(t2, s3 + 1, S2));
            }
            d3 && (t2 = z(t2, l3, a3));
          }
        }
      }
      return [t2, o3];
    }(a2, n2);
    a2 = c2[0], l2 = c2[1];
  }
  if (a2 === i2)
    return t;
  var m2 = $(t.offsetTree, l2, a2, r2), d2 = m2.offsetTree;
  return { sizeTree: a2, offsetTree: d2, lastIndex: m2.lastIndex, lastOffset: m2.lastOffset, lastSize: m2.lastSize, groupOffsetTree: o2.reduce(function(t2, e2) {
    return z(t2, e2, X(e2, d2, r2));
  }, L()), groupIndices: o2 };
}
function X(t, e, n2) {
  if (0 === e.length)
    return 0;
  var o2 = j(e, t, q), r2 = t - o2.index, i2 = o2.size * r2 + (r2 - 1) * n2 + o2.offset;
  return i2 > 0 ? i2 + n2 : i2;
}
function tt(t, e, n2) {
  if (function(t2) {
    return void 0 !== t2.groupIndex;
  }(t))
    return e.groupIndices[t.groupIndex] + 1;
  var o2 = et("LAST" === t.index ? n2 : t.index, e);
  return Math.max(0, o2, Math.min(n2, o2));
}
function et(t, e) {
  if (!nt(e))
    return t;
  for (var n2 = 0; e.groupIndices[n2] <= t + n2; )
    n2++;
  return t + n2;
}
function nt(t) {
  return !R(t.groupOffsetTree);
}
var ot = { offsetHeight: "height", offsetWidth: "width" };
var rt = system(function(t) {
  var n2 = t[0].log, o2 = t[1].recalcInProgress, r2 = stream(), i2 = stream(), a2 = statefulStreamFromEmitter(i2, 0), l2 = stream(), s2 = stream(), u2 = statefulStream(0), m2 = statefulStream([]), d2 = statefulStream(void 0), f2 = statefulStream(void 0), p2 = statefulStream(function(t2, e) {
    return w(t2, ot[e]);
  }), g2 = statefulStream(void 0), v2 = statefulStream(0), S2 = { offsetTree: [], sizeTree: L(), groupOffsetTree: L(), lastIndex: 0, lastOffset: 0, lastSize: 0, groupIndices: [] }, I2 = statefulStreamFromEmitter(pipe(r2, withLatestFrom(m2, n2, v2), scan(Q, S2), distinctUntilChanged()), S2);
  connect(pipe(m2, filter(function(t2) {
    return t2.length > 0;
  }), withLatestFrom(I2, v2), map(function(t2) {
    var e = t2[0], n3 = t2[1], o3 = t2[2], r3 = e.reduce(function(t3, e2, r4) {
      return z(t3, e2, X(e2, n3.offsetTree, o3) || r4);
    }, L());
    return c({}, n3, { groupIndices: e, groupOffsetTree: r3 });
  })), I2), connect(pipe(i2, withLatestFrom(I2), filter(function(t2) {
    return t2[0] < t2[1].lastIndex;
  }), map(function(t2) {
    var e = t2[1];
    return [{ startIndex: t2[0], endIndex: e.lastIndex, size: e.lastSize }];
  })), r2), connect(d2, f2);
  var C2 = statefulStreamFromEmitter(pipe(d2, map(function(t2) {
    return void 0 === t2;
  })), true);
  connect(pipe(f2, filter(function(t2) {
    return void 0 !== t2 && R(getValue(I2).sizeTree);
  }), map(function(t2) {
    return [{ startIndex: 0, endIndex: 0, size: t2 }];
  })), r2);
  var T2 = streamFromEmitter(pipe(r2, withLatestFrom(I2), scan(function(t2, e) {
    var n3 = e[1];
    return { changed: n3 !== t2.sizes, sizes: n3 };
  }, { changed: false, sizes: S2 }), map(function(t2) {
    return t2.changed;
  })));
  subscribe(pipe(u2, scan(function(t2, e) {
    return { diff: t2.prev - e, prev: e };
  }, { diff: 0, prev: 0 }), map(function(t2) {
    return t2.diff;
  })), function(t2) {
    t2 > 0 ? (publish(o2, true), publish(l2, t2)) : t2 < 0 && publish(s2, t2);
  }), subscribe(pipe(u2, withLatestFrom(n2)), function(t2) {
    t2[0] < 0 && (0, t2[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value", { firstItemIndex: u2 }, h.ERROR);
  });
  var x2 = streamFromEmitter(l2);
  connect(pipe(l2, withLatestFrom(I2), map(function(t2) {
    var e = t2[0], n3 = t2[1];
    if (n3.groupIndices.length > 0)
      throw new Error("Virtuoso: prepending items does not work with groups");
    return P(n3.sizeTree).reduce(function(t3, n4) {
      var o3 = n4.k, r3 = n4.v;
      return { ranges: [].concat(t3.ranges, [{ startIndex: t3.prevIndex, endIndex: o3 + e - 1, size: t3.prevSize }]), prevIndex: o3 + e, prevSize: r3 };
    }, { ranges: [], prevIndex: 0, prevSize: n3.lastSize }).ranges;
  })), r2);
  var b2 = streamFromEmitter(pipe(s2, withLatestFrom(I2, v2), map(function(t2) {
    return X(-t2[0], t2[1].offsetTree, t2[2]);
  })));
  return connect(pipe(s2, withLatestFrom(I2, v2), map(function(t2) {
    var e = t2[0], n3 = t2[1], o3 = t2[2];
    if (n3.groupIndices.length > 0)
      throw new Error("Virtuoso: shifting items does not work with groups");
    var r3 = P(n3.sizeTree).reduce(function(t3, n4) {
      var o4 = n4.v;
      return z(t3, Math.max(0, n4.k + e), o4);
    }, L());
    return c({}, n3, { sizeTree: r3 }, $(n3.offsetTree, 0, r3, o3));
  })), I2), { data: g2, totalCount: i2, sizeRanges: r2, groupIndices: m2, defaultItemSize: f2, fixedItemSize: d2, unshiftWith: l2, shiftWith: s2, shiftWithOffset: b2, beforeUnshiftWith: x2, firstItemIndex: u2, gap: v2, sizes: I2, listRefresh: T2, statefulTotalCount: a2, trackItemSizes: C2, itemSize: p2 };
}, tup(S, K), { singleton: true });
var it = "undefined" != typeof document && "scrollBehavior" in document.documentElement.style;
function at(t) {
  var e = "number" == typeof t ? { index: t } : t;
  return e.align || (e.align = "start"), e.behavior && it || (e.behavior = "auto"), e.offset || (e.offset = 0), e;
}
var lt = system(function(t) {
  var n2 = t[0], o2 = n2.sizes, r2 = n2.totalCount, i2 = n2.listRefresh, a2 = n2.gap, l2 = t[1], s2 = l2.scrollingInProgress, u2 = l2.viewportHeight, c2 = l2.scrollTo, m2 = l2.smoothScrollTargetReached, d2 = l2.headerHeight, f2 = l2.footerHeight, p2 = l2.fixedHeaderHeight, g2 = l2.fixedFooterHeight, v2 = t[2].log, S2 = stream(), I2 = statefulStream(0), C2 = null, T2 = null, w2 = null;
  function x2() {
    C2 && (C2(), C2 = null), w2 && (w2(), w2 = null), T2 && (clearTimeout(T2), T2 = null), publish(s2, false);
  }
  return connect(pipe(S2, withLatestFrom(o2, u2, r2, I2, d2, f2, v2), withLatestFrom(a2, p2, g2), map(function(t2) {
    var n3 = t2[0], o3 = n3[0], r3 = n3[1], a3 = n3[2], l3 = n3[3], u3 = n3[4], c3 = n3[5], d3 = n3[6], f3 = n3[7], p3 = t2[1], g3 = t2[2], v3 = t2[3], I3 = at(o3), b2 = I3.align, y2 = I3.behavior, H2 = I3.offset, E2 = l3 - 1, R2 = tt(I3, r3, E2), L2 = X(R2, r3.offsetTree, p3) + c3;
    "end" === b2 ? (L2 += g3 + F(r3.sizeTree, R2)[1] - a3 + v3, R2 === E2 && (L2 += d3)) : "center" === b2 ? L2 += (g3 + F(r3.sizeTree, R2)[1] - a3 + v3) / 2 : L2 -= u3, H2 && (L2 += H2);
    var k2 = function(t3) {
      x2(), t3 ? (f3("retrying to scroll to", { location: o3 }, h.DEBUG), publish(S2, o3)) : f3("list did not change, scroll successful", {}, h.DEBUG);
    };
    if (x2(), "smooth" === y2) {
      var z2 = false;
      w2 = subscribe(i2, function(t3) {
        z2 = z2 || t3;
      }), C2 = handleNext(m2, function() {
        k2(z2);
      });
    } else
      C2 = handleNext(pipe(i2, function(t3) {
        var e = setTimeout(function() {
          t3(false);
        }, 150);
        return function(n4) {
          n4 && (t3(true), clearTimeout(e));
        };
      }), k2);
    return T2 = setTimeout(function() {
      x2();
    }, 1200), publish(s2, true), f3("scrolling from index to", { index: R2, top: L2, behavior: y2 }, h.DEBUG), { top: L2, behavior: y2 };
  })), c2), { scrollToIndex: S2, topListHeight: I2 };
}, tup(rt, y, S), { singleton: true });
var st = "up";
var ut = { atBottom: false, notAtBottomBecause: "NOT_SHOWING_LAST_ITEM", state: { offsetBottom: 0, scrollTop: 0, viewportHeight: 0, scrollHeight: 0 } };
var ct = system(function(t) {
  var n2 = t[0], o2 = n2.scrollContainerState, r2 = n2.scrollTop, i2 = n2.viewportHeight, a2 = n2.headerHeight, l2 = n2.footerHeight, s2 = n2.scrollBy, u2 = statefulStream(false), c2 = statefulStream(true), m2 = stream(), d2 = stream(), f2 = statefulStream(4), p2 = statefulStream(0), h2 = statefulStreamFromEmitter(pipe(merge(pipe(duc(r2), skip(1), mapTo(true)), pipe(duc(r2), skip(1), mapTo(false), debounceTime(100))), distinctUntilChanged()), false), g2 = statefulStreamFromEmitter(pipe(merge(pipe(s2, mapTo(true)), pipe(s2, mapTo(false), debounceTime(200))), distinctUntilChanged()), false);
  connect(pipe(combineLatest(duc(r2), duc(p2)), map(function(t2) {
    return t2[0] <= t2[1];
  }), distinctUntilChanged()), c2), connect(pipe(c2, throttleTime(50)), d2);
  var v2 = streamFromEmitter(pipe(combineLatest(o2, duc(i2), duc(a2), duc(l2), duc(f2)), scan(function(t2, e) {
    var n3, o3, r3 = e[0], i3 = r3.scrollTop, a3 = r3.scrollHeight, l3 = e[1], s3 = { viewportHeight: l3, scrollTop: i3, scrollHeight: a3 };
    return i3 + l3 - a3 > -e[4] ? (i3 > t2.state.scrollTop ? (n3 = "SCROLLED_DOWN", o3 = t2.state.scrollTop - i3) : (n3 = "SIZE_DECREASED", o3 = t2.state.scrollTop - i3 || t2.scrollTopDelta), { atBottom: true, state: s3, atBottomBecause: n3, scrollTopDelta: o3 }) : { atBottom: false, notAtBottomBecause: s3.scrollHeight > t2.state.scrollHeight ? "SIZE_INCREASED" : l3 < t2.state.viewportHeight ? "VIEWPORT_HEIGHT_DECREASING" : i3 < t2.state.scrollTop ? "SCROLLING_UPWARDS" : "NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM", state: s3 };
  }, ut), distinctUntilChanged(function(t2, e) {
    return t2 && t2.atBottom === e.atBottom;
  }))), S2 = statefulStreamFromEmitter(pipe(o2, scan(function(t2, e) {
    var n3 = e.scrollTop, o3 = e.scrollHeight, r3 = e.viewportHeight;
    return x(t2.scrollHeight, o3) ? { scrollTop: n3, scrollHeight: o3, jump: 0, changed: false } : t2.scrollTop !== n3 && o3 - (n3 + r3) < 1 ? { scrollHeight: o3, scrollTop: n3, jump: t2.scrollTop - n3, changed: true } : { scrollHeight: o3, scrollTop: n3, jump: 0, changed: true };
  }, { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }), filter(function(t2) {
    return t2.changed;
  }), map(function(t2) {
    return t2.jump;
  })), 0);
  connect(pipe(v2, map(function(t2) {
    return t2.atBottom;
  })), u2), connect(pipe(u2, throttleTime(50)), m2);
  var I2 = statefulStream("down");
  connect(pipe(o2, map(function(t2) {
    return t2.scrollTop;
  }), distinctUntilChanged(), scan(function(t2, n3) {
    return getValue(g2) ? { direction: t2.direction, prevScrollTop: n3 } : { direction: n3 < t2.prevScrollTop ? st : "down", prevScrollTop: n3 };
  }, { direction: "down", prevScrollTop: 0 }), map(function(t2) {
    return t2.direction;
  })), I2), connect(pipe(o2, throttleTime(50), mapTo("none")), I2);
  var C2 = statefulStream(0);
  return connect(pipe(h2, filter(function(t2) {
    return !t2;
  }), mapTo(0)), C2), connect(pipe(r2, throttleTime(100), withLatestFrom(h2), filter(function(t2) {
    return !!t2[1];
  }), scan(function(t2, e) {
    return [t2[1], e[0]];
  }, [0, 0]), map(function(t2) {
    return t2[1] - t2[0];
  })), C2), { isScrolling: h2, isAtTop: c2, isAtBottom: u2, atBottomState: v2, atTopStateChange: d2, atBottomStateChange: m2, scrollDirection: I2, atBottomThreshold: f2, atTopThreshold: p2, scrollVelocity: C2, lastJumpDueToItemResize: S2 };
}, tup(y));
var mt = system(function(t) {
  var n2 = t[0].log, o2 = statefulStream(false), r2 = streamFromEmitter(pipe(o2, filter(function(t2) {
    return t2;
  }), distinctUntilChanged()));
  return subscribe(o2, function(t2) {
    t2 && getValue(n2)("props updated", {}, h.DEBUG);
  }), { propsReady: o2, didMount: r2 };
}, tup(S), { singleton: true });
var dt = system(function(t) {
  var n2 = t[0], o2 = n2.sizes, r2 = n2.listRefresh, i2 = n2.defaultItemSize, a2 = t[1].scrollTop, l2 = t[2].scrollToIndex, s2 = t[3].didMount, u2 = statefulStream(true), c2 = statefulStream(0);
  return connect(pipe(s2, withLatestFrom(c2), filter(function(t2) {
    return !!t2[1];
  }), mapTo(false)), u2), subscribe(pipe(combineLatest(r2, s2), withLatestFrom(u2, o2, i2), filter(function(t2) {
    var e = t2[1], n3 = t2[3];
    return t2[0][1] && (!R(t2[2].sizeTree) || void 0 !== n3) && !e;
  }), withLatestFrom(c2)), function(t2) {
    var n3 = t2[1];
    setTimeout(function() {
      handleNext(a2, function() {
        publish(u2, true);
      }), publish(l2, n3);
    });
  }), { scrolledToInitialItem: u2, initialTopMostItemIndex: c2 };
}, tup(rt, y, lt, mt), { singleton: true });
function ft(t) {
  return !!t && ("smooth" === t ? "smooth" : "auto");
}
var pt = system(function(t) {
  var n2 = t[0], o2 = n2.totalCount, r2 = n2.listRefresh, i2 = t[1], a2 = i2.isAtBottom, l2 = i2.atBottomState, s2 = t[2].scrollToIndex, u2 = t[3].scrolledToInitialItem, c2 = t[4], m2 = c2.propsReady, d2 = c2.didMount, f2 = t[5].log, p2 = t[6].scrollingInProgress, g2 = statefulStream(false), v2 = stream(), S2 = null;
  function I2(t2) {
    publish(s2, { index: "LAST", align: "end", behavior: t2 });
  }
  function C2(t2) {
    var n3 = handleNext(l2, function(n4) {
      !t2 || n4.atBottom || "SIZE_INCREASED" !== n4.notAtBottomBecause || S2 || (getValue(f2)("scrolling to bottom due to increased size", {}, h.DEBUG), I2("auto"));
    });
    setTimeout(n3, 100);
  }
  return subscribe(pipe(combineLatest(pipe(duc(o2), skip(1)), d2), withLatestFrom(duc(g2), a2, u2, p2), map(function(t2) {
    var e = t2[0], n3 = e[0], o3 = e[1] && t2[3], r3 = "auto";
    return o3 && (r3 = function(t3, e2) {
      return "function" == typeof t3 ? ft(t3(e2)) : e2 && ft(t3);
    }(t2[1], t2[2] || t2[4]), o3 = o3 && !!r3), { totalCount: n3, shouldFollow: o3, followOutputBehavior: r3 };
  }), filter(function(t2) {
    return t2.shouldFollow;
  })), function(t2) {
    var n3 = t2.totalCount, o3 = t2.followOutputBehavior;
    S2 && (S2(), S2 = null), S2 = handleNext(r2, function() {
      getValue(f2)("following output to ", { totalCount: n3 }, h.DEBUG), I2(o3), S2 = null;
    });
  }), subscribe(pipe(combineLatest(duc(g2), o2, m2), filter(function(t2) {
    return t2[0] && t2[2];
  }), scan(function(t2, e) {
    var n3 = e[1];
    return { refreshed: t2.value === n3, value: n3 };
  }, { refreshed: false, value: 0 }), filter(function(t2) {
    return t2.refreshed;
  }), withLatestFrom(g2, o2)), function(t2) {
    C2(false !== t2[1]);
  }), subscribe(v2, function() {
    C2(false !== getValue(g2));
  }), subscribe(combineLatest(duc(g2), l2), function(t2) {
    var e = t2[1];
    t2[0] && !e.atBottom && "VIEWPORT_HEIGHT_DECREASING" === e.notAtBottomBecause && I2("auto");
  }), { followOutput: g2, autoscrollToBottom: v2 };
}, tup(rt, ct, lt, dt, mt, S, y));
function ht(t) {
  return t.reduce(function(t2, e) {
    return t2.groupIndices.push(t2.totalCount), t2.totalCount += e + 1, t2;
  }, { totalCount: 0, groupIndices: [] });
}
var gt = system(function(t) {
  var n2 = t[0], o2 = n2.totalCount, r2 = n2.groupIndices, i2 = n2.sizes, a2 = t[1], l2 = a2.scrollTop, s2 = a2.headerHeight, u2 = stream(), c2 = stream(), m2 = streamFromEmitter(pipe(u2, map(ht)));
  return connect(pipe(m2, map(function(t2) {
    return t2.totalCount;
  })), o2), connect(pipe(m2, map(function(t2) {
    return t2.groupIndices;
  })), r2), connect(pipe(combineLatest(l2, i2, s2), filter(function(t2) {
    return nt(t2[1]);
  }), map(function(t2) {
    return F(t2[1].groupOffsetTree, Math.max(t2[0] - t2[2], 0), "v")[0];
  }), distinctUntilChanged(), map(function(t2) {
    return [t2];
  })), c2), { groupCounts: u2, topItemsIndexes: c2 };
}, tup(rt, y));
function vt(t, e) {
  return !(!t || t[0] !== e[0] || t[1] !== e[1]);
}
function St(t, e) {
  return !(!t || t.startIndex !== e.startIndex || t.endIndex !== e.endIndex);
}
function It(t, e, n2) {
  return "number" == typeof t ? n2 === st && "top" === e || "down" === n2 && "bottom" === e ? t : 0 : n2 === st ? "top" === e ? t.main : t.reverse : "bottom" === e ? t.main : t.reverse;
}
function Ct(t, e) {
  return "number" == typeof t ? t : t[e] || 0;
}
var Tt = system(function(t) {
  var n2 = t[0], o2 = n2.scrollTop, r2 = n2.viewportHeight, i2 = n2.deviation, a2 = n2.headerHeight, l2 = n2.fixedHeaderHeight, s2 = stream(), u2 = statefulStream(0), c2 = statefulStream(0), m2 = statefulStream(0), d2 = statefulStreamFromEmitter(pipe(combineLatest(duc(o2), duc(r2), duc(a2), duc(s2, vt), duc(m2), duc(u2), duc(l2), duc(i2), duc(c2)), map(function(t2) {
    var e = t2[0], n3 = t2[1], o3 = t2[2], r3 = t2[3], i3 = r3[0], a3 = r3[1], l3 = t2[4], s3 = t2[6], u3 = t2[7], c3 = t2[8], m3 = e - u3, d3 = t2[5] + s3, f2 = Math.max(o3 - m3, 0), p2 = "none", h2 = Ct(c3, "top"), g2 = Ct(c3, "bottom");
    return i3 -= u3, a3 += o3 + s3, (i3 += o3 + s3) > e + d3 - h2 && (p2 = st), (a3 -= u3) < e - f2 + n3 + g2 && (p2 = "down"), "none" !== p2 ? [Math.max(m3 - o3 - It(l3, "top", p2) - h2, 0), m3 - f2 - s3 + n3 + It(l3, "bottom", p2) + g2] : null;
  }), filter(function(t2) {
    return null != t2;
  }), distinctUntilChanged(vt)), [0, 0]);
  return { listBoundary: s2, overscan: m2, topListHeight: u2, increaseViewportBy: c2, visibleRange: d2 };
}, tup(y), { singleton: true });
var wt = { items: [], topItems: [], offsetTop: 0, offsetBottom: 0, top: 0, bottom: 0, topListHeight: 0, totalCount: 0, firstItemIndex: 0 };
function xt(t, e, n2) {
  if (0 === t.length)
    return [];
  if (!nt(e))
    return t.map(function(t2) {
      return c({}, t2, { index: t2.index + n2, originalIndex: t2.index });
    });
  for (var o2, r2 = [], i2 = W(e.groupOffsetTree, t[0].index, t[t.length - 1].index), a2 = void 0, l2 = 0, s2 = f(t); !(o2 = s2()).done; ) {
    var u2 = o2.value;
    (!a2 || a2.end < u2.index) && (a2 = i2.shift(), l2 = e.groupIndices.indexOf(a2.start)), r2.push(c({}, u2.index === a2.start ? { type: "group", index: l2 } : { index: u2.index - (l2 + 1) + n2, groupIndex: l2 }, { size: u2.size, offset: u2.offset, originalIndex: u2.index, data: u2.data }));
  }
  return r2;
}
function bt(t, e, n2, o2, r2, i2) {
  var a2 = 0, l2 = 0;
  if (t.length > 0) {
    a2 = t[0].offset;
    var s2 = t[t.length - 1];
    l2 = s2.offset + s2.size;
  }
  var u2 = n2 - r2.lastIndex, c2 = a2, m2 = r2.lastOffset + u2 * r2.lastSize + (u2 - 1) * o2 - l2;
  return { items: xt(t, r2, i2), topItems: xt(e, r2, i2), topListHeight: e.reduce(function(t2, e2) {
    return e2.size + t2;
  }, 0), offsetTop: a2, offsetBottom: m2, top: c2, bottom: l2, totalCount: n2, firstItemIndex: i2 };
}
var yt = system(function(t) {
  var n2 = t[0], o2 = n2.sizes, r2 = n2.totalCount, i2 = n2.data, a2 = n2.firstItemIndex, l2 = n2.gap, s2 = t[1], u2 = t[2], m2 = u2.visibleRange, d2 = u2.listBoundary, p2 = u2.topListHeight, h2 = t[3], g2 = h2.scrolledToInitialItem, v2 = h2.initialTopMostItemIndex, S2 = t[4].topListHeight, I2 = t[5], C2 = t[6].didMount, T2 = t[7].recalcInProgress, w2 = statefulStream([]), x2 = stream();
  connect(s2.topItemsIndexes, w2);
  var b2 = statefulStreamFromEmitter(pipe(combineLatest(C2, T2, duc(m2, vt), duc(r2), duc(o2), duc(v2), g2, duc(w2), duc(a2), duc(l2), i2), filter(function(t2) {
    return t2[0] && !t2[1];
  }), map(function(t2) {
    var n3 = t2[2], o3 = n3[0], r3 = n3[1], i3 = t2[3], a3 = t2[5], l3 = t2[6], s3 = t2[7], u3 = t2[8], m3 = t2[9], d3 = t2[10], p3 = t2[4], h3 = p3.sizeTree, g3 = p3.offsetTree;
    if (0 === i3 || 0 === o3 && 0 === r3)
      return c({}, wt, { totalCount: i3 });
    if (R(h3))
      return bt(function(t3, e, n4) {
        if (nt(e)) {
          var o4 = et(t3, e);
          return [{ index: F(e.groupOffsetTree, o4)[0], size: 0, offset: 0 }, { index: o4, size: 0, offset: 0, data: n4 && n4[0] }];
        }
        return [{ index: t3, size: 0, offset: 0, data: n4 && n4[0] }];
      }(function(t3, e) {
        return "number" == typeof t3 ? t3 : "LAST" === t3.index ? e - 1 : t3.index;
      }(a3, i3), p3, d3), [], i3, m3, p3, u3);
    var v3 = [];
    if (s3.length > 0)
      for (var S3, I3 = s3[0], C3 = s3[s3.length - 1], T3 = 0, w3 = f(W(h3, I3, C3)); !(S3 = w3()).done; )
        for (var x3 = S3.value, b3 = x3.value, y2 = Math.max(x3.start, I3), H2 = Math.min(x3.end, C3), E2 = y2; E2 <= H2; E2++)
          v3.push({ index: E2, size: b3, offset: T3, data: d3 && d3[E2] }), T3 += b3;
    if (!l3)
      return bt([], v3, i3, m3, p3, u3);
    var L2 = s3.length > 0 ? s3[s3.length - 1] + 1 : 0, k2 = function(t3, e, n4, o4) {
      return void 0 === o4 && (o4 = 0), o4 > 0 && (e = Math.max(e, j(t3, o4, q).offset)), N((i4 = n4, l4 = _(r4 = t3, e, a4 = Z), s4 = _(r4, i4, a4, l4), r4.slice(l4, s4 + 1)), J);
      var r4, i4, a4, l4, s4;
    }(g3, o3, r3, L2);
    if (0 === k2.length)
      return null;
    var z2 = i3 - 1;
    return bt(tap([], function(t3) {
      for (var e, n4 = f(k2); !(e = n4()).done; ) {
        var i4 = e.value, a4 = i4.value, l4 = a4.offset, s4 = i4.start, u4 = a4.size;
        if (a4.offset < o3) {
          var c2 = (s4 += Math.floor((o3 - a4.offset + m3) / (u4 + m3))) - i4.start;
          l4 += c2 * u4 + c2 * m3;
        }
        s4 < L2 && (l4 += (L2 - s4) * u4, s4 = L2);
        for (var p4 = Math.min(i4.end, z2), h4 = s4; h4 <= p4 && !(l4 >= r3); h4++)
          t3.push({ index: h4, size: u4, offset: l4, data: d3 && d3[h4] }), l4 += u4 + m3;
      }
    }), v3, i3, m3, p3, u3);
  }), filter(function(t2) {
    return null !== t2;
  }), distinctUntilChanged()), wt);
  return connect(pipe(i2, filter(function(t2) {
    return void 0 !== t2;
  }), map(function(t2) {
    return t2.length;
  })), r2), connect(pipe(b2, map(function(t2) {
    return t2.topListHeight;
  })), S2), connect(S2, p2), connect(pipe(b2, map(function(t2) {
    return [t2.top, t2.bottom];
  })), d2), connect(pipe(b2, map(function(t2) {
    return t2.items;
  })), x2), c({ listState: b2, topItemsIndexes: w2, endReached: streamFromEmitter(pipe(b2, filter(function(t2) {
    return t2.items.length > 0;
  }), withLatestFrom(r2, i2), filter(function(t2) {
    var e = t2[0].items;
    return e[e.length - 1].originalIndex === t2[1] - 1;
  }), map(function(t2) {
    return [t2[1] - 1, t2[2]];
  }), distinctUntilChanged(vt), map(function(t2) {
    return t2[0];
  }))), startReached: streamFromEmitter(pipe(b2, throttleTime(200), filter(function(t2) {
    var e = t2.items;
    return e.length > 0 && e[0].originalIndex === t2.topItems.length;
  }), map(function(t2) {
    return t2.items[0].index;
  }), distinctUntilChanged())), rangeChanged: streamFromEmitter(pipe(b2, filter(function(t2) {
    return t2.items.length > 0;
  }), map(function(t2) {
    for (var e = t2.items, n3 = 0, o3 = e.length - 1; "group" === e[n3].type && n3 < o3; )
      n3++;
    for (; "group" === e[o3].type && o3 > n3; )
      o3--;
    return { startIndex: e[n3].index, endIndex: e[o3].index };
  }), distinctUntilChanged(St))), itemsRendered: x2 }, I2);
}, tup(rt, gt, Tt, dt, lt, ct, mt, K), { singleton: true });
var Ht = system(function(t) {
  var n2 = t[0], o2 = n2.sizes, r2 = n2.firstItemIndex, i2 = n2.data, a2 = n2.gap, l2 = t[1].listState, s2 = t[2].didMount, u2 = statefulStream(0);
  return connect(pipe(s2, withLatestFrom(u2), filter(function(t2) {
    return 0 !== t2[1];
  }), withLatestFrom(o2, r2, a2, i2), map(function(t2) {
    var e = t2[0][1], n3 = t2[1], o3 = t2[2], r3 = t2[3], i3 = t2[4], a3 = void 0 === i3 ? [] : i3, l3 = 0;
    if (n3.groupIndices.length > 0)
      for (var s3, u3 = f(n3.groupIndices); !((s3 = u3()).done || s3.value - l3 >= e); )
        l3++;
    var c2 = e + l3;
    return bt(Array.from({ length: c2 }).map(function(t3, e2) {
      return { index: e2, size: 0, offset: 0, data: a3[e2] };
    }), [], c2, r3, n3, o3);
  })), l2), { initialItemCount: u2 };
}, tup(rt, yt, mt), { singleton: true });
var Et = system(function(t) {
  var n2 = t[0].scrollVelocity, o2 = statefulStream(false), r2 = stream(), i2 = statefulStream(false);
  return connect(pipe(n2, withLatestFrom(i2, o2, r2), filter(function(t2) {
    return !!t2[1];
  }), map(function(t2) {
    var e = t2[0], n3 = t2[1], o3 = t2[2], r3 = t2[3], i3 = n3.enter;
    if (o3) {
      if ((0, n3.exit)(e, r3))
        return false;
    } else if (i3(e, r3))
      return true;
    return o3;
  }), distinctUntilChanged()), o2), subscribe(pipe(combineLatest(o2, n2, r2), withLatestFrom(i2)), function(t2) {
    var e = t2[0], n3 = t2[1];
    return e[0] && n3 && n3.change && n3.change(e[1], e[2]);
  }), { isSeeking: o2, scrollSeekConfiguration: i2, scrollVelocity: n2, scrollSeekRangeChanged: r2 };
}, tup(ct), { singleton: true });
var Rt = system(function(t) {
  var n2 = t[0].topItemsIndexes, o2 = statefulStream(0);
  return connect(pipe(o2, filter(function(t2) {
    return t2 > 0;
  }), map(function(t2) {
    return Array.from({ length: t2 }).map(function(t3, e) {
      return e;
    });
  })), n2), { topItemCount: o2 };
}, tup(yt));
var Lt = system(function(t) {
  var n2 = t[0], o2 = n2.footerHeight, r2 = n2.headerHeight, i2 = n2.fixedHeaderHeight, a2 = n2.fixedFooterHeight, l2 = t[1].listState, s2 = stream(), u2 = statefulStreamFromEmitter(pipe(combineLatest(o2, a2, r2, i2, l2), map(function(t2) {
    var e = t2[4];
    return t2[0] + t2[1] + t2[2] + t2[3] + e.offsetBottom + e.bottom;
  })), 0);
  return connect(duc(u2), s2), { totalListHeight: u2, totalListHeightChanged: s2 };
}, tup(y, yt), { singleton: true });
function kt(t) {
  var e, n2 = false;
  return function() {
    return n2 || (n2 = true, e = t()), e;
  };
}
var Ft = kt(function() {
  return /iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent);
});
var zt = system(function(t) {
  var n2 = t[0], o2 = n2.scrollBy, r2 = n2.scrollTop, i2 = n2.deviation, a2 = n2.scrollingInProgress, l2 = t[1], s2 = l2.isScrolling, u2 = l2.isAtBottom, c2 = l2.scrollDirection, m2 = t[3], d2 = m2.beforeUnshiftWith, f2 = m2.shiftWithOffset, p2 = m2.sizes, g2 = m2.gap, v2 = t[4].log, S2 = t[5].recalcInProgress, I2 = streamFromEmitter(pipe(t[2].listState, withLatestFrom(l2.lastJumpDueToItemResize), scan(function(t2, e) {
    var n3 = t2[1], o3 = e[0], r3 = o3.items, i3 = o3.totalCount, a3 = o3.bottom + o3.offsetBottom, l3 = 0;
    return t2[2] === i3 && n3.length > 0 && r3.length > 0 && (0 === r3[0].originalIndex && 0 === n3[0].originalIndex || 0 != (l3 = a3 - t2[3]) && (l3 += e[1])), [l3, r3, i3, a3];
  }, [0, [], 0, 0]), filter(function(t2) {
    return 0 !== t2[0];
  }), withLatestFrom(r2, c2, a2, u2, v2), filter(function(t2) {
    return !t2[3] && 0 !== t2[1] && t2[2] === st;
  }), map(function(t2) {
    var e = t2[0][0];
    return (0, t2[5])("Upward scrolling compensation", { amount: e }, h.DEBUG), e;
  })));
  function C2(t2) {
    t2 > 0 ? (publish(o2, { top: -t2, behavior: "auto" }), publish(i2, 0)) : (publish(i2, 0), publish(o2, { top: -t2, behavior: "auto" }));
  }
  return subscribe(pipe(I2, withLatestFrom(i2, s2)), function(t2) {
    var n3 = t2[0], o3 = t2[1];
    t2[2] && Ft() ? publish(i2, o3 - n3) : C2(-n3);
  }), subscribe(pipe(combineLatest(statefulStreamFromEmitter(s2, false), i2, S2), filter(function(t2) {
    return !t2[0] && !t2[2] && 0 !== t2[1];
  }), map(function(t2) {
    return t2[1];
  }), throttleTime(1)), C2), connect(pipe(f2, map(function(t2) {
    return { top: -t2 };
  })), o2), subscribe(pipe(d2, withLatestFrom(p2, g2), map(function(t2) {
    var e = t2[0];
    return e * t2[1].lastSize + e * t2[2];
  })), function(t2) {
    publish(i2, t2), requestAnimationFrame(function() {
      publish(o2, { top: t2 }), requestAnimationFrame(function() {
        publish(i2, 0), publish(S2, false);
      });
    });
  }), { deviation: i2 };
}, tup(y, ct, yt, rt, S, K));
var Bt = system(function(t) {
  var n2 = t[0].totalListHeight, o2 = t[1].didMount, r2 = t[2].scrollTo, i2 = statefulStream(0);
  return subscribe(pipe(o2, withLatestFrom(i2), filter(function(t2) {
    return 0 !== t2[1];
  }), map(function(t2) {
    return { top: t2[1] };
  })), function(t2) {
    handleNext(pipe(n2, filter(function(t3) {
      return 0 !== t3;
    })), function() {
      setTimeout(function() {
        publish(r2, t2);
      });
    });
  }), { initialScrollTop: i2 };
}, tup(Lt, mt, y), { singleton: true });
var Pt = system(function(t) {
  var n2 = t[0].viewportHeight, o2 = t[1].totalListHeight, r2 = statefulStream(false);
  return { alignToBottom: r2, paddingTopAddition: statefulStreamFromEmitter(pipe(combineLatest(r2, n2, o2), filter(function(t2) {
    return t2[0];
  }), map(function(t2) {
    return Math.max(0, t2[1] - t2[2]);
  }), distinctUntilChanged()), 0) };
}, tup(y, Lt), { singleton: true });
var Ot = system(function(t) {
  var n2 = t[0], o2 = n2.scrollTo, r2 = n2.scrollContainerState, i2 = stream(), a2 = stream(), l2 = stream(), s2 = statefulStream(false), u2 = statefulStream(void 0);
  return connect(pipe(combineLatest(i2, a2), map(function(t2) {
    var e = t2[0], n3 = e.viewportHeight, o3 = e.scrollHeight;
    return { scrollTop: Math.max(0, e.scrollTop - t2[1].offsetTop), scrollHeight: o3, viewportHeight: n3 };
  })), r2), connect(pipe(o2, withLatestFrom(a2), map(function(t2) {
    var e = t2[0];
    return c({}, e, { top: e.top + t2[1].offsetTop });
  })), l2), { useWindowScroll: s2, customScrollParent: u2, windowScrollContainerState: i2, windowViewportRect: a2, windowScrollTo: l2 };
}, tup(y));
var Mt = ["done", "behavior", "align"];
var Vt = system(function(t) {
  var n2 = t[0], o2 = n2.sizes, r2 = n2.totalCount, i2 = n2.gap, a2 = t[1], l2 = a2.scrollTop, s2 = a2.viewportHeight, u2 = a2.headerHeight, d2 = a2.fixedHeaderHeight, f2 = a2.fixedFooterHeight, p2 = a2.scrollingInProgress, h2 = t[2].scrollToIndex, g2 = stream();
  return connect(pipe(g2, withLatestFrom(o2, s2, r2, u2, d2, f2, l2), withLatestFrom(i2), map(function(t2) {
    var n3 = t2[0], o3 = n3[0], r3 = n3[1], i3 = n3[2], a3 = n3[3], l3 = n3[4], s3 = n3[5], u3 = n3[6], d3 = n3[7], f3 = t2[1], h3 = o3.done, g3 = o3.behavior, v2 = o3.align, S2 = m(o3, Mt), I2 = null, C2 = tt(o3, r3, a3 - 1), T2 = X(C2, r3.offsetTree, f3) + l3 + s3;
    return T2 < d3 + s3 ? I2 = c({}, S2, { behavior: g3, align: null != v2 ? v2 : "start" }) : T2 + F(r3.sizeTree, C2)[1] > d3 + i3 - u3 && (I2 = c({}, S2, { behavior: g3, align: null != v2 ? v2 : "end" })), I2 ? h3 && handleNext(pipe(p2, skip(1), filter(function(t3) {
      return false === t3;
    })), h3) : h3 && h3(), I2;
  }), filter(function(t2) {
    return null !== t2;
  })), h2), { scrollIntoView: g2 };
}, tup(rt, y, lt, yt, S), { singleton: true });
var Ut = ["listState", "topItemsIndexes"];
var At = system(function(t) {
  return c({}, t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);
}, tup(Tt, Ht, mt, Et, Lt, Bt, Pt, Ot, Vt));
var Wt = system(function(t) {
  var n2 = t[0], o2 = n2.totalCount, r2 = n2.sizeRanges, i2 = n2.fixedItemSize, a2 = n2.defaultItemSize, l2 = n2.trackItemSizes, s2 = n2.itemSize, u2 = n2.data, d2 = n2.firstItemIndex, f2 = n2.groupIndices, p2 = n2.statefulTotalCount, h2 = n2.gap, g2 = t[1], v2 = g2.initialTopMostItemIndex, S2 = g2.scrolledToInitialItem, I2 = t[2], C2 = t[3], T2 = t[4], w2 = T2.listState, x2 = T2.topItemsIndexes, b2 = m(T2, Ut), y2 = t[5].scrollToIndex, H2 = t[7].topItemCount, E2 = t[8].groupCounts, R2 = t[9], L2 = t[10];
  return connect(b2.rangeChanged, R2.scrollSeekRangeChanged), connect(pipe(R2.windowViewportRect, map(function(t2) {
    return t2.visibleHeight;
  })), I2.viewportHeight), c({ totalCount: o2, data: u2, firstItemIndex: d2, sizeRanges: r2, initialTopMostItemIndex: v2, scrolledToInitialItem: S2, topItemsIndexes: x2, topItemCount: H2, groupCounts: E2, fixedItemHeight: i2, defaultItemHeight: a2, gap: h2 }, C2, { statefulTotalCount: p2, listState: w2, scrollToIndex: y2, trackItemSizes: l2, itemSize: s2, groupIndices: f2 }, b2, R2, I2, L2);
}, tup(rt, dt, y, pt, yt, lt, zt, Rt, gt, At, S));
var Nt = kt(function() {
  if ("undefined" == typeof document)
    return "sticky";
  var t = document.createElement("div");
  return t.style.position = "-webkit-sticky", "-webkit-sticky" === t.style.position ? "-webkit-sticky" : "sticky";
});
function Dt(t, e) {
  var n2 = (0, import_react2.useRef)(null), o2 = (0, import_react2.useCallback)(function(o3) {
    if (null !== o3 && o3.offsetParent) {
      var r2, i2, a2 = o3.getBoundingClientRect(), l3 = a2.width;
      if (e) {
        var s3 = e.getBoundingClientRect(), u3 = a2.top - s3.top;
        r2 = s3.height - Math.max(0, u3), i2 = u3 + e.scrollTop;
      } else
        r2 = window.innerHeight - Math.max(0, a2.top), i2 = a2.top + window.pageYOffset;
      n2.current = { offsetTop: i2, visibleHeight: r2, visibleWidth: l3 }, t(n2.current);
    }
  }, [t, e]), l2 = I(o2), s2 = l2.callbackRef, u2 = l2.ref, c2 = (0, import_react2.useCallback)(function() {
    o2(u2.current);
  }, [o2, u2]);
  return (0, import_react2.useEffect)(function() {
    if (e) {
      e.addEventListener("scroll", c2);
      var t2 = new ResizeObserver(c2);
      return t2.observe(e), function() {
        e.removeEventListener("scroll", c2), t2.unobserve(e);
      };
    }
    return window.addEventListener("scroll", c2), window.addEventListener("resize", c2), function() {
      window.removeEventListener("scroll", c2), window.removeEventListener("resize", c2);
    };
  }, [c2, e]), s2;
}
var Gt = n.createContext(void 0);
var _t = ["placeholder"];
var jt = ["style", "children"];
var Kt = ["style", "children"];
function Yt(t) {
  return t;
}
var qt = system(function() {
  var t = statefulStream(function(t2) {
    return "Item " + t2;
  }), n2 = statefulStream(null), o2 = statefulStream(function(t2) {
    return "Group " + t2;
  }), r2 = statefulStream({}), i2 = statefulStream(Yt), a2 = statefulStream("div"), l2 = statefulStream(noop), s2 = function(t2, n3) {
    return void 0 === n3 && (n3 = null), statefulStreamFromEmitter(pipe(r2, map(function(e) {
      return e[t2];
    }), distinctUntilChanged()), n3);
  };
  return { context: n2, itemContent: t, groupContent: o2, components: r2, computeItemKey: i2, headerFooterTag: a2, scrollerRef: l2, FooterComponent: s2("Footer"), HeaderComponent: s2("Header"), TopItemListComponent: s2("TopItemList"), ListComponent: s2("List", "div"), ItemComponent: s2("Item", "div"), GroupComponent: s2("Group", "div"), ScrollerComponent: s2("Scroller", "div"), EmptyPlaceholder: s2("EmptyPlaceholder"), ScrollSeekPlaceholder: s2("ScrollSeekPlaceholder") };
});
function Zt(t, n2) {
  var o2 = stream();
  return subscribe(o2, function() {
    return console.warn("react-virtuoso: You are using a deprecated property. " + n2, "color: red;", "color: inherit;", "color: blue;");
  }), connect(o2, t), o2;
}
var Jt = system(function(t) {
  var n2 = t[0], o2 = t[1], r2 = { item: Zt(o2.itemContent, "Rename the %citem%c prop to %citemContent."), group: Zt(o2.groupContent, "Rename the %cgroup%c prop to %cgroupContent."), topItems: Zt(n2.topItemCount, "Rename the %ctopItems%c prop to %ctopItemCount."), itemHeight: Zt(n2.fixedItemHeight, "Rename the %citemHeight%c prop to %cfixedItemHeight."), scrollingStateChange: Zt(n2.isScrolling, "Rename the %cscrollingStateChange%c prop to %cisScrolling."), adjustForPrependedItems: stream(), maxHeightCacheSize: stream(), footer: stream(), header: stream(), HeaderContainer: stream(), FooterContainer: stream(), ItemContainer: stream(), ScrollContainer: stream(), GroupContainer: stream(), ListContainer: stream(), emptyComponent: stream(), scrollSeek: stream() };
  function i2(t2, n3, r3) {
    connect(pipe(t2, withLatestFrom(o2.components), map(function(t3) {
      var e, o3 = t3[0], i3 = t3[1];
      return console.warn("react-virtuoso: " + r3 + " property is deprecated. Pass components." + n3 + " instead."), c({}, i3, ((e = {})[n3] = o3, e));
    })), o2.components);
  }
  return subscribe(r2.adjustForPrependedItems, function() {
    console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.", "color: red;", "color: inherit;", "color: blue;");
  }), subscribe(r2.maxHeightCacheSize, function() {
    console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.");
  }), subscribe(r2.HeaderContainer, function() {
    console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.");
  }), subscribe(r2.FooterContainer, function() {
    console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.");
  }), subscribe(r2.scrollSeek, function(t2) {
    var r3 = t2.placeholder, i3 = m(t2, _t);
    console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."), publish(o2.components, c({}, getValue(o2.components), { ScrollSeekPlaceholder: r3 })), publish(n2.scrollSeekConfiguration, i3);
  }), i2(r2.footer, "Footer", "footer"), i2(r2.header, "Header", "header"), i2(r2.ItemContainer, "Item", "ItemContainer"), i2(r2.ListContainer, "List", "ListContainer"), i2(r2.ScrollContainer, "Scroller", "ScrollContainer"), i2(r2.emptyComponent, "EmptyPlaceholder", "emptyComponent"), i2(r2.GroupContainer, "Group", "GroupContainer"), c({}, n2, o2, r2);
}, tup(Wt, qt));
var $t = function(t) {
  return n.createElement("div", { style: { height: t.height } });
};
var Qt = { position: Nt(), zIndex: 1, overflowAnchor: "none" };
var Xt = { overflowAnchor: "none" };
var te = n.memo(function(t) {
  var o2 = t.showTopList, r2 = void 0 !== o2 && o2, i2 = he("listState"), a2 = pe("sizeRanges"), s2 = he("useWindowScroll"), u2 = he("customScrollParent"), m2 = pe("windowScrollContainerState"), d2 = pe("scrollContainerState"), f2 = u2 || s2 ? m2 : d2, p2 = he("itemContent"), h2 = he("context"), g2 = he("groupContent"), v2 = he("trackItemSizes"), S2 = he("itemSize"), I2 = he("log"), C2 = pe("gap"), w2 = T(a2, S2, v2, r2 ? noop : f2, I2, C2, u2).callbackRef, x2 = n.useState(0), b2 = x2[0], y2 = x2[1];
  ge("deviation", function(t2) {
    b2 !== t2 && y2(t2);
  });
  var H2 = he("EmptyPlaceholder"), E2 = he("ScrollSeekPlaceholder") || $t, R2 = he("ListComponent"), L2 = he("ItemComponent"), k2 = he("GroupComponent"), F2 = he("computeItemKey"), z2 = he("isSeeking"), B2 = he("groupIndices").length > 0, P2 = he("paddingTopAddition"), O2 = r2 ? {} : { boxSizing: "border-box", paddingTop: i2.offsetTop + P2, paddingBottom: i2.offsetBottom, marginTop: b2 };
  return !r2 && 0 === i2.totalCount && H2 ? (0, import_react2.createElement)(H2, re(H2, h2)) : (0, import_react2.createElement)(R2, c({}, re(R2, h2), { ref: w2, style: O2, "data-test-id": r2 ? "virtuoso-top-item-list" : "virtuoso-item-list" }), (r2 ? i2.topItems : i2.items).map(function(t2) {
    var e = t2.originalIndex, n2 = F2(e + i2.firstItemIndex, t2.data, h2);
    return z2 ? (0, import_react2.createElement)(E2, c({}, re(E2, h2), { key: n2, index: t2.index, height: t2.size, type: t2.type || "item" }, "group" === t2.type ? {} : { groupIndex: t2.groupIndex })) : "group" === t2.type ? (0, import_react2.createElement)(k2, c({}, re(k2, h2), { key: n2, "data-index": e, "data-known-size": t2.size, "data-item-index": t2.index, style: Qt }), g2(t2.index)) : (0, import_react2.createElement)(L2, c({}, re(L2, h2), { key: n2, "data-index": e, "data-known-size": t2.size, "data-item-index": t2.index, "data-item-group-index": t2.groupIndex, style: Xt }), B2 ? p2(t2.index, t2.groupIndex, t2.data, h2) : p2(t2.index, t2.data, h2));
  }));
});
var ee = { height: "100%", outline: "none", overflowY: "auto", position: "relative", WebkitOverflowScrolling: "touch" };
var ne = { width: "100%", height: "100%", position: "absolute", top: 0 };
var oe = { width: "100%", position: Nt(), top: 0 };
function re(t, e) {
  if ("string" != typeof t)
    return { context: e };
}
var ie = n.memo(function() {
  var t = he("HeaderComponent"), e = pe("headerHeight"), n2 = he("headerFooterTag"), o2 = C(function(t2) {
    return e(w(t2, "height"));
  }), r2 = he("context");
  return t ? (0, import_react2.createElement)(n2, { ref: o2 }, (0, import_react2.createElement)(t, re(t, r2))) : null;
});
var ae = n.memo(function() {
  var t = he("FooterComponent"), e = pe("footerHeight"), n2 = he("headerFooterTag"), o2 = C(function(t2) {
    return e(w(t2, "height"));
  }), r2 = he("context");
  return t ? (0, import_react2.createElement)(n2, { ref: o2 }, (0, import_react2.createElement)(t, re(t, r2))) : null;
});
function le(t) {
  var e = t.usePublisher, o2 = t.useEmitter, r2 = t.useEmitterValue;
  return n.memo(function(t2) {
    var n2 = t2.style, i2 = t2.children, a2 = m(t2, jt), s2 = e("scrollContainerState"), u2 = r2("ScrollerComponent"), d2 = e("smoothScrollTargetReached"), f2 = r2("scrollerRef"), p2 = r2("context"), h2 = b(s2, d2, u2, f2), g2 = h2.scrollerRef, v2 = h2.scrollByCallback;
    return o2("scrollTo", h2.scrollToCallback), o2("scrollBy", v2), (0, import_react2.createElement)(u2, c({ ref: g2, style: c({}, ee, n2), "data-test-id": "virtuoso-scroller", "data-virtuoso-scroller": true, tabIndex: 0 }, a2, re(u2, p2)), i2);
  });
}
function se(t) {
  var o2 = t.usePublisher, r2 = t.useEmitter, i2 = t.useEmitterValue;
  return n.memo(function(t2) {
    var n2 = t2.style, a2 = t2.children, s2 = m(t2, Kt), u2 = o2("windowScrollContainerState"), d2 = i2("ScrollerComponent"), f2 = o2("smoothScrollTargetReached"), p2 = i2("totalListHeight"), h2 = i2("deviation"), v2 = i2("customScrollParent"), S2 = i2("context"), I2 = b(u2, f2, d2, noop, v2), C2 = I2.scrollerRef, T2 = I2.scrollByCallback, w2 = I2.scrollToCallback;
    return g(function() {
      return C2.current = v2 || window, function() {
        C2.current = null;
      };
    }, [C2, v2]), r2("windowScrollTo", w2), r2("scrollBy", T2), (0, import_react2.createElement)(d2, c({ style: c({ position: "relative" }, n2, 0 !== p2 ? { height: p2 + h2 } : {}), "data-virtuoso-scroller": true }, s2, re(d2, S2)), a2);
  });
}
var ue = function(t) {
  var o2 = t.children, r2 = (0, import_react2.useContext)(Gt), i2 = pe("viewportHeight"), a2 = pe("fixedItemHeight"), l2 = C(compose(i2, function(t2) {
    return w(t2, "height");
  }));
  return n.useEffect(function() {
    r2 && (i2(r2.viewportHeight), a2(r2.itemHeight));
  }, [r2, i2, a2]), n.createElement("div", { style: ne, ref: l2, "data-viewport-type": "element" }, o2);
};
var ce = function(t) {
  var e = t.children, o2 = (0, import_react2.useContext)(Gt), r2 = pe("windowViewportRect"), i2 = pe("fixedItemHeight"), a2 = he("customScrollParent"), l2 = Dt(r2, a2);
  return n.useEffect(function() {
    o2 && (i2(o2.itemHeight), r2({ offsetTop: 0, visibleHeight: o2.viewportHeight, visibleWidth: 100 }));
  }, [o2, r2, i2]), n.createElement("div", { ref: l2, style: ne, "data-viewport-type": "window" }, e);
};
var me = function(t) {
  var e = t.children, n2 = he("TopItemListComponent"), o2 = he("headerHeight"), r2 = c({}, oe, { marginTop: o2 + "px" }), i2 = he("context");
  return (0, import_react2.createElement)(n2 || "div", { style: r2, context: i2 }, e);
};
var de = systemToComponent(Jt, { required: {}, optional: { context: "context", followOutput: "followOutput", firstItemIndex: "firstItemIndex", itemContent: "itemContent", groupContent: "groupContent", overscan: "overscan", increaseViewportBy: "increaseViewportBy", totalCount: "totalCount", topItemCount: "topItemCount", initialTopMostItemIndex: "initialTopMostItemIndex", components: "components", groupCounts: "groupCounts", atBottomThreshold: "atBottomThreshold", atTopThreshold: "atTopThreshold", computeItemKey: "computeItemKey", defaultItemHeight: "defaultItemHeight", fixedItemHeight: "fixedItemHeight", itemSize: "itemSize", scrollSeekConfiguration: "scrollSeekConfiguration", headerFooterTag: "headerFooterTag", data: "data", initialItemCount: "initialItemCount", initialScrollTop: "initialScrollTop", alignToBottom: "alignToBottom", useWindowScroll: "useWindowScroll", customScrollParent: "customScrollParent", scrollerRef: "scrollerRef", logLevel: "logLevel", react18ConcurrentRendering: "react18ConcurrentRendering", item: "item", group: "group", topItems: "topItems", itemHeight: "itemHeight", scrollingStateChange: "scrollingStateChange", maxHeightCacheSize: "maxHeightCacheSize", footer: "footer", header: "header", ItemContainer: "ItemContainer", ScrollContainer: "ScrollContainer", ListContainer: "ListContainer", GroupContainer: "GroupContainer", emptyComponent: "emptyComponent", HeaderContainer: "HeaderContainer", FooterContainer: "FooterContainer", scrollSeek: "scrollSeek" }, methods: { scrollToIndex: "scrollToIndex", scrollIntoView: "scrollIntoView", scrollTo: "scrollTo", scrollBy: "scrollBy", adjustForPrependedItems: "adjustForPrependedItems", autoscrollToBottom: "autoscrollToBottom" }, events: { isScrolling: "isScrolling", endReached: "endReached", startReached: "startReached", rangeChanged: "rangeChanged", atBottomStateChange: "atBottomStateChange", atTopStateChange: "atTopStateChange", totalListHeightChanged: "totalListHeightChanged", itemsRendered: "itemsRendered", groupIndices: "groupIndices" } }, n.memo(function(t) {
  var e = he("useWindowScroll"), o2 = he("topItemsIndexes").length > 0, r2 = he("customScrollParent"), i2 = r2 || e ? ce : ue;
  return n.createElement(r2 || e ? Se : ve, c({}, t), n.createElement(i2, null, n.createElement(ie, null), n.createElement(te, null), n.createElement(ae, null)), o2 && n.createElement(me, null, n.createElement(te, { showTopList: true })));
}));
var fe = de.Component;
var pe = de.usePublisher;
var he = de.useEmitterValue;
var ge = de.useEmitter;
var ve = le({ usePublisher: pe, useEmitterValue: he, useEmitter: ge });
var Se = se({ usePublisher: pe, useEmitterValue: he, useEmitter: ge });
var Ie = { items: [], offsetBottom: 0, offsetTop: 0, top: 0, bottom: 0, itemHeight: 0, itemWidth: 0 };
var Ce = { items: [{ index: 0 }], offsetBottom: 0, offsetTop: 0, top: 0, bottom: 0, itemHeight: 0, itemWidth: 0 };
var Te = Math.round;
var we = Math.ceil;
var xe = Math.floor;
var be = Math.min;
var ye = Math.max;
function He(t, e) {
  return Array.from({ length: e - t + 1 }).map(function(e2, n2) {
    return { index: n2 + t };
  });
}
function Ee(t, e) {
  return t && t.column === e.column && t.row === e.row;
}
var Re = system(function(t) {
  var n2 = t[0], o2 = n2.overscan, r2 = n2.visibleRange, i2 = n2.listBoundary, a2 = t[1], l2 = a2.scrollTop, s2 = a2.viewportHeight, u2 = a2.scrollBy, m2 = a2.scrollTo, d2 = a2.smoothScrollTargetReached, f2 = a2.scrollContainerState, p2 = t[2], h2 = t[3], g2 = t[4], v2 = g2.propsReady, S2 = g2.didMount, I2 = t[5], C2 = I2.windowViewportRect, T2 = I2.windowScrollTo, w2 = I2.useWindowScroll, x2 = I2.customScrollParent, b2 = I2.windowScrollContainerState, y2 = t[6], H2 = statefulStream(0), E2 = statefulStream(0), R2 = statefulStream(Ie), L2 = statefulStream({ height: 0, width: 0 }), k2 = statefulStream({ height: 0, width: 0 }), F2 = stream(), z2 = stream(), B2 = statefulStream(0), P2 = statefulStream({ row: 0, column: 0 });
  connect(pipe(S2, withLatestFrom(E2), filter(function(t2) {
    return 0 !== t2[1];
  }), map(function(t2) {
    return { items: He(0, t2[1] - 1), top: 0, bottom: 0, offsetBottom: 0, offsetTop: 0, itemHeight: 0, itemWidth: 0 };
  })), R2), connect(pipe(combineLatest(duc(H2), r2, duc(P2, Ee), duc(k2, function(t2, e) {
    return t2 && t2.width === e.width && t2.height === e.height;
  })), withLatestFrom(L2), map(function(t2) {
    var e = t2[0], n3 = e[0], o3 = e[1], r3 = o3[0], i3 = o3[1], a3 = e[2], l3 = e[3], s3 = t2[1], u3 = a3.row, c2 = l3.height, m3 = l3.width, d3 = s3.width;
    if (0 === n3 || 0 === d3)
      return Ie;
    if (0 === m3)
      return Ce;
    var f3 = Fe(d3, m3, a3.column), p3 = f3 * xe((r3 + u3) / (c2 + u3)), h3 = f3 * we((i3 + u3) / (c2 + u3)) - 1;
    h3 = ye(0, be(n3 - 1, h3));
    var g3 = He(p3 = be(h3, ye(0, p3)), h3), v3 = Le(s3, a3, l3, g3), S3 = v3.top, I3 = v3.bottom, C3 = we(n3 / f3);
    return { items: g3, offsetTop: S3, offsetBottom: C3 * c2 + (C3 - 1) * u3 - I3, top: S3, bottom: I3, itemHeight: c2, itemWidth: m3 };
  })), R2), connect(pipe(L2, map(function(t2) {
    return t2.height;
  })), s2), connect(pipe(combineLatest(L2, k2, R2, P2), map(function(t2) {
    var e = Le(t2[0], t2[3], t2[1], t2[2].items);
    return [e.top, e.bottom];
  }), distinctUntilChanged(vt)), i2);
  var O2 = streamFromEmitter(pipe(duc(R2), filter(function(t2) {
    return t2.items.length > 0;
  }), withLatestFrom(H2), filter(function(t2) {
    var e = t2[0].items;
    return e[e.length - 1].index === t2[1] - 1;
  }), map(function(t2) {
    return t2[1] - 1;
  }), distinctUntilChanged())), M2 = streamFromEmitter(pipe(duc(R2), filter(function(t2) {
    var e = t2.items;
    return e.length > 0 && 0 === e[0].index;
  }), mapTo(0), distinctUntilChanged())), V2 = streamFromEmitter(pipe(duc(R2), filter(function(t2) {
    return t2.items.length > 0;
  }), map(function(t2) {
    var e = t2.items;
    return { startIndex: e[0].index, endIndex: e[e.length - 1].index };
  }), distinctUntilChanged(St)));
  connect(V2, h2.scrollSeekRangeChanged), connect(pipe(F2, withLatestFrom(L2, k2, H2, P2), map(function(t2) {
    var e = t2[1], n3 = t2[2], o3 = t2[3], r3 = t2[4], i3 = at(t2[0]), a3 = i3.align, l3 = i3.behavior, s3 = i3.offset, u3 = i3.index;
    "LAST" === u3 && (u3 = o3 - 1);
    var c2 = ke(e, r3, n3, u3 = ye(0, u3, be(o3 - 1, u3)));
    return "end" === a3 ? c2 = Te(c2 - e.height + n3.height) : "center" === a3 && (c2 = Te(c2 - e.height / 2 + n3.height / 2)), s3 && (c2 += s3), { top: c2, behavior: l3 };
  })), m2);
  var U2 = statefulStreamFromEmitter(pipe(R2, map(function(t2) {
    return t2.offsetBottom + t2.bottom;
  })), 0);
  return connect(pipe(C2, map(function(t2) {
    return { width: t2.visibleWidth, height: t2.visibleHeight };
  })), L2), c({ totalCount: H2, viewportDimensions: L2, itemDimensions: k2, scrollTop: l2, scrollHeight: z2, overscan: o2, scrollBy: u2, scrollTo: m2, scrollToIndex: F2, smoothScrollTargetReached: d2, windowViewportRect: C2, windowScrollTo: T2, useWindowScroll: w2, customScrollParent: x2, windowScrollContainerState: b2, deviation: B2, scrollContainerState: f2, initialItemCount: E2, gap: P2 }, h2, { gridState: R2, totalListHeight: U2 }, p2, { startReached: M2, endReached: O2, rangeChanged: V2, propsReady: v2 }, y2);
}, tup(Tt, y, ct, Et, mt, Ot, S));
function Le(t, e, n2, o2) {
  var r2 = n2.height;
  return void 0 === r2 || 0 === o2.length ? { top: 0, bottom: 0 } : { top: ke(t, e, n2, o2[0].index), bottom: ke(t, e, n2, o2[o2.length - 1].index) + r2 };
}
function ke(t, e, n2, o2) {
  var r2 = Fe(t.width, n2.width, e.column), i2 = xe(o2 / r2), a2 = i2 * n2.height + ye(0, i2 - 1) * e.row;
  return a2 > 0 ? a2 + e.row : a2;
}
function Fe(t, e, n2) {
  return ye(1, xe((t + n2) / (e + n2)));
}
var ze = ["placeholder"];
var Be = system(function() {
  var t = statefulStream(function(t2) {
    return "Item " + t2;
  }), n2 = statefulStream({}), o2 = statefulStream(null), r2 = statefulStream("virtuoso-grid-item"), i2 = statefulStream("virtuoso-grid-list"), a2 = statefulStream(Yt), l2 = statefulStream(noop), s2 = function(t2, o3) {
    return void 0 === o3 && (o3 = null), statefulStreamFromEmitter(pipe(n2, map(function(e) {
      return e[t2];
    }), distinctUntilChanged()), o3);
  };
  return { context: o2, itemContent: t, components: n2, computeItemKey: a2, itemClassName: r2, listClassName: i2, scrollerRef: l2, ListComponent: s2("List", "div"), ItemComponent: s2("Item", "div"), ScrollerComponent: s2("Scroller", "div"), ScrollSeekPlaceholder: s2("ScrollSeekPlaceholder", "div") };
});
var Pe = system(function(t) {
  var n2 = t[0], o2 = t[1], r2 = { item: Zt(o2.itemContent, "Rename the %citem%c prop to %citemContent."), ItemContainer: stream(), ScrollContainer: stream(), ListContainer: stream(), emptyComponent: stream(), scrollSeek: stream() };
  function i2(t2, n3, r3) {
    connect(pipe(t2, withLatestFrom(o2.components), map(function(t3) {
      var e, o3 = t3[0], i3 = t3[1];
      return console.warn("react-virtuoso: " + r3 + " property is deprecated. Pass components." + n3 + " instead."), c({}, i3, ((e = {})[n3] = o3, e));
    })), o2.components);
  }
  return subscribe(r2.scrollSeek, function(t2) {
    var r3 = t2.placeholder, i3 = m(t2, ze);
    console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."), publish(o2.components, c({}, getValue(o2.components), { ScrollSeekPlaceholder: r3 })), publish(n2.scrollSeekConfiguration, i3);
  }), i2(r2.ItemContainer, "Item", "ItemContainer"), i2(r2.ListContainer, "List", "ListContainer"), i2(r2.ScrollContainer, "Scroller", "ScrollContainer"), c({}, n2, o2, r2);
}, tup(Re, Be));
var Oe = n.memo(function() {
  var t = Ne("gridState"), e = Ne("listClassName"), n2 = Ne("itemClassName"), o2 = Ne("itemContent"), r2 = Ne("computeItemKey"), i2 = Ne("isSeeking"), a2 = We("scrollHeight"), s2 = Ne("ItemComponent"), u2 = Ne("ListComponent"), m2 = Ne("ScrollSeekPlaceholder"), d2 = Ne("context"), f2 = We("itemDimensions"), p2 = We("gap"), h2 = Ne("log"), g2 = C(function(t2) {
    a2(t2.parentElement.parentElement.scrollHeight);
    var e2 = t2.firstChild;
    e2 && f2(e2.getBoundingClientRect()), p2({ row: je("row-gap", getComputedStyle(t2).rowGap, h2), column: je("column-gap", getComputedStyle(t2).columnGap, h2) });
  });
  return (0, import_react2.createElement)(u2, c({ ref: g2, className: e }, re(u2, d2), { style: { paddingTop: t.offsetTop, paddingBottom: t.offsetBottom } }), t.items.map(function(e2) {
    var a3 = r2(e2.index);
    return i2 ? (0, import_react2.createElement)(m2, c({ key: a3 }, re(m2, d2), { index: e2.index, height: t.itemHeight, width: t.itemWidth })) : (0, import_react2.createElement)(s2, c({}, re(s2, d2), { className: n2, "data-index": e2.index, key: a3 }), o2(e2.index, d2));
  }));
});
var Me = function(t) {
  var e = t.children, o2 = We("viewportDimensions"), r2 = C(function(t2) {
    o2(t2.getBoundingClientRect());
  });
  return n.createElement("div", { style: ne, ref: r2 }, e);
};
var Ve = function(t) {
  var e = t.children, o2 = Dt(We("windowViewportRect"), Ne("customScrollParent"));
  return n.createElement("div", { ref: o2, style: ne }, e);
};
var Ue = systemToComponent(Pe, { optional: { context: "context", totalCount: "totalCount", overscan: "overscan", itemContent: "itemContent", components: "components", computeItemKey: "computeItemKey", initialItemCount: "initialItemCount", scrollSeekConfiguration: "scrollSeekConfiguration", listClassName: "listClassName", itemClassName: "itemClassName", useWindowScroll: "useWindowScroll", customScrollParent: "customScrollParent", scrollerRef: "scrollerRef", item: "item", ItemContainer: "ItemContainer", ScrollContainer: "ScrollContainer", ListContainer: "ListContainer", scrollSeek: "scrollSeek" }, methods: { scrollTo: "scrollTo", scrollBy: "scrollBy", scrollToIndex: "scrollToIndex" }, events: { isScrolling: "isScrolling", endReached: "endReached", startReached: "startReached", rangeChanged: "rangeChanged", atBottomStateChange: "atBottomStateChange", atTopStateChange: "atTopStateChange" } }, n.memo(function(t) {
  var e = c({}, t), o2 = Ne("useWindowScroll"), r2 = Ne("customScrollParent"), i2 = r2 || o2 ? Ve : Me;
  return n.createElement(r2 || o2 ? _e : Ge, c({}, e), n.createElement(i2, null, n.createElement(Oe, null)));
}));
var Ae = Ue.Component;
var We = Ue.usePublisher;
var Ne = Ue.useEmitterValue;
var De = Ue.useEmitter;
var Ge = le({ usePublisher: We, useEmitterValue: Ne, useEmitter: De });
var _e = se({ usePublisher: We, useEmitterValue: Ne, useEmitter: De });
function je(t, e, n2) {
  return "normal" === e || null != e && e.endsWith("px") || n2(t + " was not resolved to pixel value correctly", e, h.WARN), "normal" === e ? 0 : parseInt(null != e ? e : "0", 10);
}
var Ke = system(function() {
  var t = statefulStream(function(t2) {
    return n.createElement("td", null, "Item $", t2);
  }), o2 = statefulStream(null), r2 = statefulStream(null), i2 = statefulStream(null), a2 = statefulStream({}), l2 = statefulStream(Yt), s2 = statefulStream(noop), u2 = function(t2, n2) {
    return void 0 === n2 && (n2 = null), statefulStreamFromEmitter(pipe(a2, map(function(e) {
      return e[t2];
    }), distinctUntilChanged()), n2);
  };
  return { context: o2, itemContent: t, fixedHeaderContent: r2, fixedFooterContent: i2, components: a2, computeItemKey: l2, scrollerRef: s2, TableComponent: u2("Table", "table"), TableHeadComponent: u2("TableHead", "thead"), TableFooterComponent: u2("TableFoot", "tfoot"), TableBodyComponent: u2("TableBody", "tbody"), TableRowComponent: u2("TableRow", "tr"), ScrollerComponent: u2("Scroller", "div"), EmptyPlaceholder: u2("EmptyPlaceholder"), ScrollSeekPlaceholder: u2("ScrollSeekPlaceholder"), FillerRow: u2("FillerRow") };
});
var Ye = system(function(t) {
  return c({}, t[0], t[1]);
}, tup(Wt, Ke));
var qe = function(t) {
  return n.createElement("tr", null, n.createElement("td", { style: { height: t.height } }));
};
var Ze = function(t) {
  return n.createElement("tr", null, n.createElement("td", { style: { height: t.height, padding: 0, border: 0 } }));
};
var Je = n.memo(function() {
  var t = nn("listState"), e = en("sizeRanges"), o2 = nn("useWindowScroll"), r2 = nn("customScrollParent"), i2 = en("windowScrollContainerState"), a2 = en("scrollContainerState"), s2 = r2 || o2 ? i2 : a2, u2 = nn("itemContent"), m2 = nn("trackItemSizes"), d2 = T(e, nn("itemSize"), m2, s2, nn("log"), void 0, r2), f2 = d2.callbackRef, p2 = d2.ref, h2 = n.useState(0), g2 = h2[0], v2 = h2[1];
  on("deviation", function(t2) {
    g2 !== t2 && (p2.current.style.marginTop = t2 + "px", v2(t2));
  });
  var S2 = nn("EmptyPlaceholder"), I2 = nn("ScrollSeekPlaceholder") || qe, C2 = nn("FillerRow") || Ze, w2 = nn("TableBodyComponent"), x2 = nn("TableRowComponent"), b2 = nn("computeItemKey"), y2 = nn("isSeeking"), H2 = nn("paddingTopAddition"), E2 = nn("firstItemIndex"), R2 = nn("statefulTotalCount"), L2 = nn("context");
  if (0 === R2 && S2)
    return (0, import_react2.createElement)(S2, re(S2, L2));
  var k2 = t.offsetTop + H2 + g2, F2 = t.offsetBottom, z2 = k2 > 0 ? n.createElement(C2, { height: k2, key: "padding-top" }) : null, B2 = F2 > 0 ? n.createElement(C2, { height: F2, key: "padding-bottom" }) : null, P2 = t.items.map(function(t2) {
    var e2 = t2.originalIndex, n2 = b2(e2 + E2, t2.data, L2);
    return y2 ? (0, import_react2.createElement)(I2, c({}, re(I2, L2), { key: n2, index: t2.index, height: t2.size, type: t2.type || "item" })) : (0, import_react2.createElement)(x2, c({}, re(x2, L2), { key: n2, "data-index": e2, "data-known-size": t2.size, "data-item-index": t2.index, style: { overflowAnchor: "none" } }), u2(t2.index, t2.data, L2));
  });
  return (0, import_react2.createElement)(w2, c({ ref: f2, "data-test-id": "virtuoso-item-list" }, re(w2, L2)), [z2].concat(P2, [B2]));
});
var $e = function(t) {
  var o2 = t.children, r2 = (0, import_react2.useContext)(Gt), i2 = en("viewportHeight"), a2 = en("fixedItemHeight"), l2 = C(compose(i2, function(t2) {
    return w(t2, "height");
  }));
  return n.useEffect(function() {
    r2 && (i2(r2.viewportHeight), a2(r2.itemHeight));
  }, [r2, i2, a2]), n.createElement("div", { style: ne, ref: l2, "data-viewport-type": "element" }, o2);
};
var Qe = function(t) {
  var e = t.children, o2 = (0, import_react2.useContext)(Gt), r2 = en("windowViewportRect"), i2 = en("fixedItemHeight"), a2 = nn("customScrollParent"), l2 = Dt(r2, a2);
  return n.useEffect(function() {
    o2 && (i2(o2.itemHeight), r2({ offsetTop: 0, visibleHeight: o2.viewportHeight, visibleWidth: 100 }));
  }, [o2, r2, i2]), n.createElement("div", { ref: l2, style: ne, "data-viewport-type": "window" }, e);
};
var Xe = systemToComponent(Ye, { required: {}, optional: { context: "context", followOutput: "followOutput", firstItemIndex: "firstItemIndex", itemContent: "itemContent", fixedHeaderContent: "fixedHeaderContent", fixedFooterContent: "fixedFooterContent", overscan: "overscan", increaseViewportBy: "increaseViewportBy", totalCount: "totalCount", topItemCount: "topItemCount", initialTopMostItemIndex: "initialTopMostItemIndex", components: "components", groupCounts: "groupCounts", atBottomThreshold: "atBottomThreshold", atTopThreshold: "atTopThreshold", computeItemKey: "computeItemKey", defaultItemHeight: "defaultItemHeight", fixedItemHeight: "fixedItemHeight", itemSize: "itemSize", scrollSeekConfiguration: "scrollSeekConfiguration", data: "data", initialItemCount: "initialItemCount", initialScrollTop: "initialScrollTop", alignToBottom: "alignToBottom", useWindowScroll: "useWindowScroll", customScrollParent: "customScrollParent", scrollerRef: "scrollerRef", logLevel: "logLevel", react18ConcurrentRendering: "react18ConcurrentRendering" }, methods: { scrollToIndex: "scrollToIndex", scrollIntoView: "scrollIntoView", scrollTo: "scrollTo", scrollBy: "scrollBy" }, events: { isScrolling: "isScrolling", endReached: "endReached", startReached: "startReached", rangeChanged: "rangeChanged", atBottomStateChange: "atBottomStateChange", atTopStateChange: "atTopStateChange", totalListHeightChanged: "totalListHeightChanged", itemsRendered: "itemsRendered", groupIndices: "groupIndices" } }, n.memo(function(t) {
  var o2 = nn("useWindowScroll"), r2 = nn("customScrollParent"), i2 = en("fixedHeaderHeight"), a2 = en("fixedFooterHeight"), l2 = nn("fixedHeaderContent"), s2 = nn("fixedFooterContent"), u2 = nn("context"), m2 = C(compose(i2, function(t2) {
    return w(t2, "height");
  })), d2 = C(compose(a2, function(t2) {
    return w(t2, "height");
  })), f2 = r2 || o2 ? an : rn, p2 = r2 || o2 ? Qe : $e, h2 = nn("TableComponent"), g2 = nn("TableHeadComponent"), v2 = nn("TableFooterComponent"), S2 = l2 ? n.createElement(g2, c({ key: "TableHead", style: { zIndex: 1, position: "sticky", top: 0 }, ref: m2 }, re(g2, u2)), l2()) : null, I2 = s2 ? n.createElement(v2, c({ key: "TableFoot", style: { zIndex: 1, position: "sticky", bottom: 0 }, ref: d2 }, re(v2, u2)), s2()) : null;
  return n.createElement(f2, c({}, t), n.createElement(p2, null, n.createElement(h2, c({ style: { borderSpacing: 0 } }, re(h2, u2)), [S2, n.createElement(Je, { key: "TableBody" }), I2])));
}));
var tn = Xe.Component;
var en = Xe.usePublisher;
var nn = Xe.useEmitterValue;
var on = Xe.useEmitter;
var rn = le({ usePublisher: en, useEmitterValue: nn, useEmitter: on });
var an = se({ usePublisher: en, useEmitterValue: nn, useEmitter: on });
var ln = fe;
var sn = fe;
var un = tn;
var cn = Ae;
export {
  sn as GroupedVirtuoso,
  h as LogLevel,
  un as TableVirtuoso,
  ln as Virtuoso,
  cn as VirtuosoGrid,
  Gt as VirtuosoMockContext
};
//# sourceMappingURL=react-virtuoso.js.map
